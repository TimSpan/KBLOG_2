<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小程序-02 | KevinBlog</title>
    <meta name="description" content="小程序-02">
    <link rel="stylesheet" href="/KBLOG_2/assets/style.6d00581b.css">
    <link rel="modulepreload" href="/KBLOG_2/assets/Home.ade7884b.js">
    <link rel="modulepreload" href="/KBLOG_2/assets/app.469c13bb.js">
    <link rel="modulepreload" href="/KBLOG_2/assets/posts_wechat-02.md.caaebcbb.lean.js">
    
    <link rel="icon" type="image/jpeg" href="/avator.jpg">
  <meta name="author" content="Kevin">
  <meta property="og:title" content="Home">
  <meta property="og:description" content="Home of Kevin">
  <meta name="twitter:title" content="小程序-02 | KevinBlog">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><div class="no-sidebar theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/KBLOG_2/" aria-label="KevinBlog, back to home" data-v-40587210 data-v-016a8bd8><img class="logo" src="/KBLOG_2/haimianbaobao.png" alt="Logo" data-v-016a8bd8> KevinBlog</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/" data-v-49fe041d>🏡Home <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/tags" data-v-49fe041d>🔖Tags <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/archives" data-v-49fe041d>📃Archives <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="toggleTheme" data-v-f68cd400><div class="light" data-v-f68cd400>🔆</div></div><!--]--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/" data-v-49fe041d>🏡Home <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/tags" data-v-49fe041d>🔖Tags <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/archives" data-v-49fe041d>📃Archives <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--[--><!----><!--]--><!--[--><h1 class="title" data-v-cda39220></h1><div class="category" data-v-4c27e764><ul data-v-4c27e764><!--[--><li class="header" data-v-4c27e764><a href="#_1、wxml-模板语法" class="header-h1" data-v-4c27e764>1、WXML 模板语法</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_1-1、数据绑定" class="header-h2" data-v-4c27e764>1.1、数据绑定</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_1-2、事件绑定" class="header-h2" data-v-4c27e764>1.2、事件绑定</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_1-3、bindtap-的使用-onclick" class="header-h2" data-v-4c27e764>1.3、bindtap 的使用 ( onclick)</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_1-4、访问和修改data-中的数据-react" class="header-h2" data-v-4c27e764>1.4、访问和修改data 中的数据(React)</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_1-5、事件传参-data" class="header-h2" data-v-4c27e764>1.5、事件传参(data-)</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_1-6、bindinput-的使用" class="header-h2" data-v-4c27e764>1.6、bindinput 的使用</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_1-7、双向数据绑定-react" class="header-h2" data-v-4c27e764>1.7、双向数据绑定(React)</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_1-8、条件渲染" class="header-h2" data-v-4c27e764>1.8、条件渲染</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_1-9、wx-if-与-hidden-的对比" class="header-h2" data-v-4c27e764>1.9、wx:if 与 hidden 的对比</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_2-0、列表渲染" class="header-h2" data-v-4c27e764>2.0、列表渲染</a></li></ul></li><li class="header" data-v-4c27e764><a href="#_2、wxss-模板样式" class="header-h1" data-v-4c27e764>2、WXSS 模板样式</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_2-1、rpx" class="header-h2" data-v-4c27e764>2.1、rpx</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_2-2、样式导入" class="header-h2" data-v-4c27e764>2.2、样式导入</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_2-3、全局样式和局部样式" class="header-h2" data-v-4c27e764>2.3、全局样式和局部样式</a></li></ul></li><li class="header" data-v-4c27e764><a href="#_3、全局配置" class="header-h1" data-v-4c27e764>3、全局配置</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_3-1、全局配置文件及常用的配置项" class="header-h2" data-v-4c27e764>3.1、全局配置文件及常用的配置项</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_3-2、window" class="header-h2" data-v-4c27e764>3.2、window</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_3-3、tabbar" class="header-h2" data-v-4c27e764>3.3、tabBar</a></li></ul></li><li class="header" data-v-4c27e764><a href="#_4、页面配置" class="header-h1" data-v-4c27e764>4、页面配置</a><!----></li><li class="header" data-v-4c27e764><a href="#_5、网络数据请求" class="header-h1" data-v-4c27e764>5、网络数据请求</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_5-1、在页面刚加载时请求数据" class="header-h2" data-v-4c27e764>5.1、在页面刚加载时请求数据</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_5-2、跳过-request-合法域名校验" class="header-h2" data-v-4c27e764>5.2、跳过 request 合法域名校验</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_5-3、-关于-跨域-和-ajax-的说明" class="header-h2" data-v-4c27e764>5.3、 关于 跨域 和 Ajax 的说明</a></li></ul></li><!--]--></ul></div><!--]--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h1 id="小程序-02" tabindex="-1">小程序-02 <a class="header-anchor" href="#小程序-02" aria-hidden="true">#</a></h1><h2 id="_1、wxml-模板语法" tabindex="-1">1、WXML 模板语法 <a class="header-anchor" href="#_1、wxml-模板语法" aria-hidden="true">#</a></h2><h3 id="_1-1、数据绑定" tabindex="-1">1.1、数据绑定 <a class="header-anchor" href="#_1-1、数据绑定" aria-hidden="true">#</a></h3><p>① 在 data 中定义数据</p><p>② 在 WXML 中使用数据</p><blockquote><ol><li>在 data 中定义页面的数据</li></ol></blockquote><div class="language-js"><pre><code><span class="token comment">// index.js</span>
<span class="token comment">// 获取应用实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    motto<span class="token operator">:</span> <span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">,</span>
    userInfo<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    hasUserInfo<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    canIUse<span class="token operator">:</span> wx<span class="token punctuation">.</span><span class="token function">canIUse</span><span class="token punctuation">(</span><span class="token string">&#39;button.open-type.getUserInfo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    canIUseGetUserProfile<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    canIUseOpenData<span class="token operator">:</span> wx<span class="token punctuation">.</span><span class="token function">canIUse</span><span class="token punctuation">(</span><span class="token string">&#39;open-data.type.userAvatarUrl&#39;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> wx<span class="token punctuation">.</span><span class="token function">canIUse</span><span class="token punctuation">(</span><span class="token string">&#39;open-data.type.userNickName&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 如需尝试获取用户信息可改为false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 事件处理函数</span>
  <span class="token function">bindViewTap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token operator">:</span> <span class="token string">&#39;../logs/logs&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>wx<span class="token punctuation">.</span>getUserProfile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        canIUseGetUserProfile<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 推荐使用wx.getUserProfile获取用户信息，开发者每次通过该接口获取用户个人信息均需用户确认，开发者妥善保管用户快速填写的头像昵称，避免重复弹窗</span>
    wx<span class="token punctuation">.</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      desc<span class="token operator">:</span> <span class="token string">&#39;展示用户信息&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 声明获取用户个人信息后的用途，后续会展示在弹窗中，请谨慎填写</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          userInfo<span class="token operator">:</span> res<span class="token punctuation">.</span>userInfo<span class="token punctuation">,</span>
          hasUserInfo<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不推荐使用getUserInfo获取用户信息，预计自2021年4月13日起，getUserInfo将不再弹出弹窗，并直接返回匿名的用户个人信息</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      userInfo<span class="token operator">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>userInfo<span class="token punctuation">,</span>
      hasUserInfo<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><ol start="2"><li>在 WXML 中使用数据</li></ol></blockquote><p>把data中的数据绑定到页面中渲染，使用 Mustache 语法（双大括号）将变量包起来即可。语法格式为</p><div class="language-html"><pre><code><span class="token comment">&lt;!-- 插值表达式/大胡子语法 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{ motto }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 动态绑定数据 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ imgSRC }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widthFix<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  {{ randomNum &gt;= 5 ? &#39;数字大于或等于5&#39; : &#39;数字小于5&#39; }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js"><pre><code>data<span class="token operator">:</span> <span class="token punctuation">{</span>
    randomNum<span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 生成 10 以内的随机数</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">和 Vue 的差异</p><p>在小程序中, 无论是标签的属性还是标签的内容, 都是使用 Mustache 语法进行数据绑定, 这和 Vue 有些差别, 在 Vue 中, 标签的属性是通过 v-bind ,标签的内容是通过 Mustache 语法.</p></div><h3 id="_1-2、事件绑定" tabindex="-1">1.2、事件绑定 <a class="header-anchor" href="#_1-2、事件绑定" aria-hidden="true">#</a></h3><p>事件是渲染层到逻辑层的通讯方式。通过事件可以将用户在渲染层产生的行为，反馈到逻辑层进行业务 的处理</p><p>小程序中常用的事件如下</p><table><thead><tr><th>类型</th><th>绑定方式</th><th>事件描述</th></tr></thead><tbody><tr><td>tap</td><td>bindtap 或 bind:tap</td><td>手指触摸后马上离开，类似于 HTML 中的 click 事 件</td></tr><tr><td>input</td><td>bindinput 或 bind:input</td><td>文本框的输入事件</td></tr><tr><td>change</td><td>bindchange 或 bind:change</td><td>状态改变时触发</td></tr></tbody></table><p>当事件回调触发的时候，会收到一个事件对象 event ，它的详细属性如下表所示：</p><table><thead><tr><th>属性</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>type</td><td>String</td><td>事件类型</td></tr><tr><td>timeStamp</td><td>Integer</td><td>页面打开到触发事件所经过的毫秒数</td></tr><tr><td><code>target</code></td><td>Object</td><td>触发事件的组件的一些属性值集合</td></tr><tr><td>currentTarget</td><td>Object</td><td>当前组件的一些属性值集合</td></tr><tr><td><code>detail</code></td><td>Object</td><td>额外的信息</td></tr><tr><td>touches</td><td>Array</td><td>触摸事件，当前停留在屏幕中的触摸点信息的数组</td></tr><tr><td>changedTouches</td><td>Array</td><td>触摸事件，当前变化的触摸点信息的数组</td></tr></tbody></table><p><strong>关注 target 和 detail 这两个属性</strong></p><p>关于 target 属性, 它经常会和 currentTarget 容易混淆</p><ul><li>target 是触发该事件的源头组件，</li><li>currentTarget 则是当前事件所绑定的组件。举例如下：</li></ul><p><img src="/KBLOG_2/assets/2.7a583a75.png" alt=""></p><p>点击内部的按钮时，点击事件以冒泡的方式向外扩散，也会触发外层 view 的 tap 事件处理函数。 此时，对于外层的 view 来说：</p><p><code>e.target</code> 指向的是触发事件的源头组件，因此， e.target 是内部的按钮组件</p><p><code>e.currentTarget</code> 指向的是当前正在触发事件的那个组件，因此， <code>e.currentTarget</code> 是当前的 view 组件 所以, 小程序的事件也是具备冒泡的哦</p><h3 id="_1-3、bindtap-的使用-onclick" tabindex="-1">1.3、bindtap 的使用 ( onclick) <a class="header-anchor" href="#_1-3、bindtap-的使用-onclick" aria-hidden="true">#</a></h3><p>在小程序中，不存在 HTML 中的 onclick 鼠标点击事件，而是通过 tap 事件来响应用户的触摸行 为。具体步骤如下:</p><p>1、通过 bindtap ，可以为组件绑定 tap 触摸事件</p><div class="language-html"><pre><code><span class="token comment">&lt;!-- tap触摸事件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onHandleTap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- +1按钮的事件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>countBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onAddHandle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我试试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>事件参数通过形参 event （一般简写成 e ） 来接 收,</p><p>注意,事件处理函数需要和 data 平级</p><div class="language-js"><pre><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取应用实例</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    randomNum<span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 生成 10 以内的随机数</span>
    imgSRC<span class="token operator">:</span> <span class="token string">&#39;https://timspan.gitee.io/creative_website/assets/dog.e73586b8.jpg&#39;</span><span class="token punctuation">,</span>
    userInfo<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    count<span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onHandleTap</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 事件对象e</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onAddHandle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_1-4、访问和修改data-中的数据-react" tabindex="-1">1.4、访问和修改data 中的数据(React) <a class="header-anchor" href="#_1-4、访问和修改data-中的数据-react" aria-hidden="true">#</a></h3><blockquote><p>和 react 差不多</p></blockquote><h3 id="_1-5、事件传参-data" tabindex="-1">1.5、事件传参(data-) <a class="header-anchor" href="#_1-5、事件传参-data" aria-hidden="true">#</a></h3><p><strong>小程序中的事件传参比较特殊</strong>，不能在绑定事件的同时为事件处理函数传递参数。</p><p>例如，下面的代码将不能正常工作：</p><div class="language-html"><pre><code><span class="token comment">&lt;!-- 错误写法 ，小程序中会将bindtap对应的事件都当做事件名称 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onAddHandle(1, 2)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点我试试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>因为小程序会把 bindtap 的属性值，统一当作事件名称来处理，相当于要调用一个名称为 btnHandler(123) 的事件处理函数。</p><p>我们可以为组件提供 data-* 自定义属性传参，其中 * 代表的是参数的名字，示例代码如下</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>countBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--
事件传参 data-*自定义属性传参，*代表参数名字
info 会被解析为参数的数字
数值2 会被解析为参数的值
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onBtnString<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-info</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>傻子<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>事件传参-拼接字符串<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取应用实例</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    randomNum<span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 生成 10 以内的随机数</span>
    imgSRC<span class="token operator">:</span> <span class="token string">&#39;https://timspan.gitee.io/creative_website/assets/dog.e73586b8.jpg&#39;</span><span class="token punctuation">,</span>
    userInfo<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    count<span class="token operator">:</span> <span class="token string">&#39;你是&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 事件传参-拼接字符串</span>
  <span class="token function">onBtnString</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// this.data.count就是旧值</span>
      count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>count <span class="token operator">+</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>info
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// onHandleTap: function (e) {</span>
  <span class="token comment">//   // 事件对象e</span>
  <span class="token comment">//   console.log(e);</span>
  <span class="token comment">// },</span>
  <span class="token comment">// onAddHandle: function () {</span>
  <span class="token comment">//   this.setData({</span>
  <span class="token comment">//     count: this.data.count + 1</span>
  <span class="token comment">//   })</span>
  <span class="token comment">// }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/KBLOG_2/assets/3.4f17bb19.png" alt=""></p><h3 id="_1-6、bindinput-的使用" tabindex="-1">1.6、bindinput 的使用 <a class="header-anchor" href="#_1-6、bindinput-的使用" aria-hidden="true">#</a></h3><p>在小程序中，通过 input 事件来响应文本框的输入事件，具体的使用步骤如下：</p><p>① 通过 bindinput ，可以为文本框绑定输入事件：</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iptBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- input事件 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ipt1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindinput</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputValue<span class="token punctuation">&quot;</span></span> <span class="token attr-name">focus</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>② 在页面的 .js 文件中定义事件处理函数：</p><div class="language-js"><pre><code>  <span class="token function">inputValue</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_1-7、双向数据绑定-react" tabindex="-1">1.7、双向数据绑定(React) <a class="header-anchor" href="#_1-7、双向数据绑定-react" aria-hidden="true">#</a></h3><p>实现步骤：</p><p>① 定义数据</p><p>② 渲染结构, 绑定 data 中的数据</p><p>③ 美化样式</p><p>④ 监听 input 事件</p><div class="language-js"><pre><code>data<span class="token operator">:</span> <span class="token punctuation">{</span>
	msg<span class="token operator">:</span> <span class="token string">&#39;请输入...&#39;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>渲染结构：将data中的 msg 绑定到输入框的 value 属性</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iptBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- input事件 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ msg }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ipt1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindinput</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputHandle<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">focus</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>监听 input 事件:</p><div class="language-js"><pre><code>  <span class="token comment">// 实现input的数据和data数据同步</span>
  <span class="token function">inputHandle</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      msg<span class="token operator">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><h3 id="_1-8、条件渲染" tabindex="-1">1.8、条件渲染 <a class="header-anchor" href="#_1-8、条件渲染" aria-hidden="true">#</a></h3><p>在小程序中，使用 <code>wx:if=&quot;&quot;</code> 来判断是否需要渲染该代码块 也可以配合 <code>wx:elif</code> 和 <code>wx:else</code> 来添加 else 判断：</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ type === 1 }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>男<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>elif</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ type === 2 }}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>女<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">&gt;</span></span>保密<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>结合 使用 wx:if</p><p>如果要一次性控制多个组件的展示与隐藏，可以使用一个 标签将多个组件包装起来，并在 标签上使用 wx:if 控制属性，使用block标签进行包裹，只是包裹性值，不会再页面渲染，类似于 template 标签示例如下：</p><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ true }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>多个<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>注意： 并不是一个组件，它只是一个包裹性质的容器，不会在页面中做任何渲染。</p></blockquote><p>hidden</p><p>在小程序中，直接使用 hidden=&quot;&quot; 也能控制元素的显示与隐藏：</p><div class="language-html"><pre><code><span class="token comment">&lt;!-- 使用 hidden=&quot;{{ condition }}&quot; 也能控制元素的显示与隐藏 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ flag }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>条件位 true 时，隐藏元素<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_1-9、wx-if-与-hidden-的对比" tabindex="-1">1.9、wx:if 与 hidden 的对比 <a class="header-anchor" href="#_1-9、wx-if-与-hidden-的对比" aria-hidden="true">#</a></h3><p>① 运行方式不同</p><ul><li>wx:if 以动态创建和移除元素的方式，控制元素的展示与隐藏</li><li>hidden 以切换样式的方式（ display: none/block; ），控制元素的显示与隐藏</li></ul><p>② 使用建议</p><ul><li>频繁切换时，建议使用 hidden</li><li>控制条件复杂时，建议使用 wx:if 搭配 wx:elif 、 wx:else 进行展示与隐藏的切换</li></ul><h3 id="_2-0、列表渲染" tabindex="-1">2.0、列表渲染 <a class="header-anchor" href="#_2-0、列表渲染" aria-hidden="true">#</a></h3><p>wx:for 指定数组，进行循环渲染重复的组件结构</p><div class="language-html"><pre><code><span class="token comment">&lt;!-- 循环渲染模板语法 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ arr1 }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
索引是 {{ index }} 当前项是： {{ item }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>默认情况下，当前循环项的索引用 index 表示；当前循环项用 item 表示。</p><p>使用 <code>wx:for-index</code> <strong>可以指定当前循环项的索引</strong> 使用 <code>wx:for-item</code> 可以<strong>指定当前项的变量名</strong></p><div class="language-html"><pre><code><span class="token comment">&lt;!-- 手动指定索引和当前项的变量名 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ arr1 }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	索引是 {{ i }} 当前项是： {{ item }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>类似于 Vue 列表渲染中的 <strong>:key</strong> ，小程序在实现列表渲染时，也建议为渲染出来的列表项指定唯 一的 key 值，从而提高渲染的效率，示例代码如下</p><div class="language-html"><pre><code><span class="token comment">&lt;!-- 手动指定索引和当前项的变量名 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ arr1 }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  索引是 {{ i }} 当前项是： {{ item }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- wx:key 提高渲染效率 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{ arr2 }}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  当前项是： {{ item.username }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_2、wxss-模板样式" tabindex="-1">2、WXSS 模板样式 <a class="header-anchor" href="#_2、wxss-模板样式" aria-hidden="true">#</a></h2><p>WXSS ( WeiXin Style Sheets )是一套样式语言，用于美化 WXML 的组件样式，类似于网页开发中的 CSS 。</p><p>WXSS 具有 CSS 大部分特性，同时， WXSS 还对 CSS 进行了扩充以及修改，以适应微信小程序的开 发。</p><p>与 CSS 相比， WXSS 扩展的特性有：</p><ul><li>rpx 尺寸单位</li><li>@import 样式导入</li></ul><h3 id="_2-1、rpx" tabindex="-1">2.1、rpx <a class="header-anchor" href="#_2-1、rpx" aria-hidden="true">#</a></h3><p>rpx （ responsive pixel ）是微信小程序独有的，用来解决屏适配的尺寸单位。</p><p>rpx 的实现原理非常简单：鉴于不同设备屏幕的大小不同，为了实现屏幕的自动适配， rpx 把所有设 备的屏幕， 在宽度上等分为 750 份, 1份就是1 rpx , 所以:</p><ul><li>在较小的设备上，1 rpx 所代表的宽度较小</li><li>在较大的设备上，1 rpx 所代表的宽度较大</li></ul><p>小程序在不同设备上运行的时候，会自动把 rpx 的样式单位换算成对应的像素单位来渲染，从而实现 屏幕适配</p><p>rpx 与 px 之间的单位换算：</p><p>在 iPhone6 上， CSS 像素屏幕宽度为375 px ，共有 750 个物理像素，等分为 750rpx 。则：</p><ul><li><p>750 rpx = 375 px = 750 物理像素</p></li><li><p>1 rpx = 0.5 px = 1物理像素</p></li></ul><table><thead><tr><th>设备</th><th>rpx 换算 px (屏幕宽度/750)</th><th>px 换算 rpx (750/屏幕宽度)</th></tr></thead><tbody><tr><td>iPhone 5</td><td>1 rpx = 0.42 px</td><td>1px = 2.34rpx</td></tr><tr><td>iPhone 6</td><td>1 rpx = 0.5 px</td><td>1px = 2rpx</td></tr><tr><td>iPhone 6 Plus</td><td>1 rpx = 0.552 px</td><td>1px = 1.81rpx</td></tr></tbody></table><p>官方建议：开发微信小程序时，设计师可以用 iPhone6 作为视觉稿的标准。 开发举例：在 iPhone6 上如果要绘制宽 100px ， 高20px 的盒子，换算成 rpx 单位，宽高分别为 200rpx 和 40rpx 。</p><h3 id="_2-2、样式导入" tabindex="-1">2.2、样式导入 <a class="header-anchor" href="#_2-2、样式导入" aria-hidden="true">#</a></h3><p>使用 WXSS 提供的 @import 语法，可以导入外联的样式表。</p><p>@import 后跟需要导入的外联样式表的相对路径，用分号 ; 表示语句结束。示例如下：</p><h3 id="_2-3、全局样式和局部样式" tabindex="-1">2.3、全局样式和局部样式 <a class="header-anchor" href="#_2-3、全局样式和局部样式" aria-hidden="true">#</a></h3><blockquote><ol><li>全局样式</li></ol></blockquote><p>定义在 app.wxss 中的样式为全局样式，作用于每一个页面。</p><blockquote><ol start="2"><li>局部样式</li></ol></blockquote><p>在页面的 . wxss 文件中定义的样式为局部样式，只作用于当前页面。</p><p>注意：</p><ol><li>当局部样式和全局样式冲突时，根据 就近原则 ，局部样式会覆盖全局样式</li><li>当局部样式的权重大于或等于全局样式的权重时，才会覆盖全局的样式</li></ol><h2 id="_3、全局配置" tabindex="-1">3、全局配置 <a class="header-anchor" href="#_3、全局配置" aria-hidden="true">#</a></h2><h3 id="_3-1、全局配置文件及常用的配置项" tabindex="-1">3.1、全局配置文件及常用的配置项 <a class="header-anchor" href="#_3-1、全局配置文件及常用的配置项" aria-hidden="true">#</a></h3><p>小程序根目录下的 app.json 文件是小程序的全局配置文件。常用的配置项如下：</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/logs/logs&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;window&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;backgroundTextStyle&quot;</span><span class="token operator">:</span><span class="token string">&quot;light&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Weixin&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span><span class="token string">&quot;black&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v2&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sitemapLocation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sitemap.json&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>pages：当前小程序所有页面的存放路径</li><li>window：全局设置小程序窗口的外观</li><li>tabBar：设置小程序底部的 tabBar 效果</li><li>style：是否启用新版的组件样式</li></ol><h3 id="_3-2、window" tabindex="-1">3.2、window <a class="header-anchor" href="#_3-2、window" aria-hidden="true">#</a></h3><p>小程序窗口的组成部分：</p><ol><li><code>navigationBar</code>导航栏 - 顶部导航栏区域</li><li><code>background</code>背景区 - 默认不可见，下拉才显示</li><li><code>page</code>页面主体区 - 页面主体用来显示 wxml 中的布局</li></ol><p>具体示意图如下:</p><p><img src="/KBLOG_2/assets/window.b4bdd377.jpg" alt=""></p><blockquote><ol start="2"><li>了解 window 节点常用的配置项</li></ol></blockquote><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th><th style="text-align:left;">描述</th><th style="text-align:left;">最低版本</th></tr></thead><tbody><tr><td style="text-align:left;"><strong style="color:rgb(133, 255, 133);">navigationBarBackgroundColor</strong></td><td style="text-align:left;">HexColor</td><td style="text-align:left;">#000000</td><td style="text-align:left;">导航栏背景颜色，如 <code>#000000</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong style="color:rgb(133, 255, 133);">navigationBarTextStyle</strong></td><td style="text-align:left;">string</td><td style="text-align:left;">white</td><td style="text-align:left;">导航栏标题颜色，仅支持 <code>black</code> / <code>white</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong style="color:rgb(133, 255, 133);">navigationBarTitleText</strong></td><td style="text-align:left;">string</td><td style="text-align:left;"></td><td style="text-align:left;">导航栏标题文字内容</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong style="color:red;">navigationStyle</strong></td><td style="text-align:left;">string</td><td style="text-align:left;">default</td><td style="text-align:left;">导航栏样式，仅支持以下值： <code>default</code> 默认样式 <code>custom</code> 自定义导航栏，只保留右上角胶囊按钮。</td><td style="text-align:left;">iOS/Android 微信客户端 7.0.0，Windows 微信客户端不支持</td></tr><tr><td style="text-align:left;">homeButton</td><td style="text-align:left;">boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">在非首页、非页面栈最底层页面或非 tabbar 内页面中的导航栏展示 home 键</td><td style="text-align:left;">微信客户端 8.0.24</td></tr><tr><td style="text-align:left;"><strong style="color:rgb(133, 255, 133);">backgroundColor</strong></td><td style="text-align:left;">HexColor</td><td style="text-align:left;">#ffffff</td><td style="text-align:left;">窗口的背景色</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><strong style="color:rgb(133, 255, 133);">backgroundTextStyle</strong></td><td style="text-align:left;">string</td><td style="text-align:left;">dark</td><td style="text-align:left;">下拉 loading 的样式，仅支持 <code>dark</code> / <code>light</code></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">backgroundColorTop</td><td style="text-align:left;">string</td><td style="text-align:left;">#ffffff</td><td style="text-align:left;">顶部窗口的背景色，仅 iOS 支持</td><td style="text-align:left;">微信客户端 6.5.16</td></tr><tr><td style="text-align:left;"><strong style="color:rgb(133, 255, 133);">backgroundColorBottom</strong></td><td style="text-align:left;">string</td><td style="text-align:left;">#ffffff</td><td style="text-align:left;">底部窗口的背景色，仅 iOS 支持</td><td style="text-align:left;">微信客户端 6.5.16</td></tr><tr><td style="text-align:left;"><strong style="color:rgb(133, 255, 133);">enablePullDownRefresh</strong></td><td style="text-align:left;">boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">是否开启当前页面下拉刷新。 详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onpulldownrefresh" target="_blank" rel="noopener noreferrer">Page.onPullDownRefresh</a></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">onReachBottomDistance</td><td style="text-align:left;">number</td><td style="text-align:left;">50</td><td style="text-align:left;">页面上拉触底事件触发时距页面底部距离，单位为px。 详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onreachbottom" target="_blank" rel="noopener noreferrer">Page.onReachBottom</a></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">pageOrientation</td><td style="text-align:left;">string</td><td style="text-align:left;">portrait</td><td style="text-align:left;">屏幕旋转设置，支持 <code>auto</code> / <code>portrait</code> / <code>landscape</code> 详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html" target="_blank" rel="noopener noreferrer">响应显示区域变化</a></td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.4.0</a> (auto) / <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.5.0</a> (landscape)</td></tr><tr><td style="text-align:left;">disableScroll</td><td style="text-align:left;">boolean</td><td style="text-align:left;">false</td><td style="text-align:left;">设置为 <code>true</code> 则页面整体不能上下滚动。 只在页面配置中有效，无法在 <code>app.json</code> 中设置</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">usingComponents</td><td style="text-align:left;">Object</td><td style="text-align:left;">否</td><td style="text-align:left;">页面<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/" target="_blank" rel="noopener noreferrer">自定义组件</a>配置</td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">1.6.3</a></td></tr><tr><td style="text-align:left;">initialRenderingCache</td><td style="text-align:left;">string</td><td style="text-align:left;"></td><td style="text-align:left;">页面<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/initial-rendering-cache.html" target="_blank" rel="noopener noreferrer">初始渲染缓存</a>配置，支持 <code>static</code> / <code>dynamic</code></td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.11.1</a></td></tr><tr><td style="text-align:left;">style</td><td style="text-align:left;">string</td><td style="text-align:left;">default</td><td style="text-align:left;">启用新版的组件样式</td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.10.2</a></td></tr><tr><td style="text-align:left;">singlePage</td><td style="text-align:left;">Object</td><td style="text-align:left;">否</td><td style="text-align:left;">单页模式相关配置</td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.12.0</a></td></tr><tr><td style="text-align:left;">restartStrategy</td><td style="text-align:left;">string</td><td style="text-align:left;">homePage</td><td style="text-align:left;">重新启动策略配置</td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.8.0</a></td></tr><tr><td style="text-align:left;">handleWebviewPreload</td><td style="text-align:left;">string</td><td style="text-align:left;">static</td><td style="text-align:left;">控制<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/performance/tips/runtime_nav.html#_2-4-%E6%8E%A7%E5%88%B6%E9%A2%84%E5%8A%A0%E8%BD%BD%E4%B8%8B%E4%B8%AA%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%97%B6%E6%9C%BA" target="_blank" rel="noopener noreferrer">预加载下个页面的时机</a>。支持 <code>static</code> / <code>manual</code> / <code>auto</code></td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.15.0</a></td></tr><tr><td style="text-align:left;">visualEffectInBackground</td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">切入系统后台时，隐藏页面内容，保护用户隐私。支持 <code>hidden</code> / <code>none</code>，若对页面单独设置则会覆盖全局的配置，详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html" target="_blank" rel="noopener noreferrer">全局配置</a></td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.15.0</a></td></tr><tr><td style="text-align:left;">enablePassiveEvent</td><td style="text-align:left;">Object或boolean</td><td style="text-align:left;">否</td><td style="text-align:left;">事件监听是否为 passive，若对页面单独设置则会覆盖全局的配置，详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html" target="_blank" rel="noopener noreferrer">全局配置</a></td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.24.1</a></td></tr><tr><td style="text-align:left;">renderer</td><td style="text-align:left;">string</td><td style="text-align:left;">否</td><td style="text-align:left;">渲染后端</td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.25.2</a></td></tr></tbody></table><div class="language-json"><pre><code><span class="token property">&quot;window&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
<span class="token comment">// 下拉loading的样式，仅支持dark/light</span>
<span class="token property">&quot;backgroundTextStyle&quot;</span><span class="token operator">:</span><span class="token string">&quot;light&quot;</span><span class="token punctuation">,</span>
<span class="token comment">// 配置导航栏背景色,仅支持16进制的颜色</span>
<span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
<span class="token comment">// 导航栏标题文本</span>
<span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;微信读书&quot;</span><span class="token punctuation">,</span>
<span class="token comment">// 导航栏标题颜色，仅支持 black/white</span>
<span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span><span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span>
<span class="token comment">// 开启下拉刷新</span>
<span class="token property">&quot;enablePullDownRefresh&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">// 下拉窗口的背景色</span>
<span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#efefef&quot;</span><span class="token punctuation">,</span>
<span class="token comment">// 上拉触底的距离：默认50像素，单位省去,我们会在触发了上拉触底事件时获取下一页的数</span>
据
<span class="token property">&quot;onReachBottomDistance&quot;</span><span class="token operator">:</span> <span class="token number">50</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><h3 id="_3-3、tabbar" tabindex="-1">3.3、tabBar <a class="header-anchor" href="#_3-3、tabbar" aria-hidden="true">#</a></h3><ul><li>底部tabBar</li><li>顶部tabBar</li></ul><p>注意：</p><ul><li>tabBar 中只能配置最少 2 个、最多 5 个 tab 页签</li><li>当渲染顶部 tabBar 时，不显示 icon ，只显示文本</li></ul><p>一、tabBar 的 6 个组成部分</p><ol><li>backgroundColor ： tabBar 的背景色</li><li>selectedIconPath ：选中时的图片路径</li><li>borderStyle：tabBar 上边框的颜色</li><li>iconPath ：未选中时的图片路径</li><li>selectedColor：tab 上的文字选中时的颜色</li><li>color：tab 上文字的默认（未选中）颜色</li></ol><p>具体示意图如下:</p><p><img src="/KBLOG_2/assets/tabBar.d1640d65.jpg" alt=""></p><p>二、tabBar 节点的配置项</p><p>二、每个 tab 项的配置选项</p><table><thead><tr><th>属性</th><th>类型</th><th>必填</th><th>描述</th></tr></thead><tbody><tr><td><code>pagePath</code></td><td>String</td><td><code>是</code></td><td><code>页面路径，页面必须在pages中预先定义</code></td></tr><tr><td><code>text</code></td><td>String</td><td><code>是</code></td><td>tab上显示的文字</td></tr><tr><td>iconPath</td><td>String</td><td>否</td><td><code>未选中时</code>的图标路径：当position为top时，不显示icon</td></tr><tr><td>selectedIconPath</td><td>String</td><td>否</td><td><code>选中时</code>的图标路径：当position为top时，不显示icon</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">注意</p><p>tabbar路径必须放在数组开始的位置，也就是上面</p></div><div class="language-json"><pre><code>  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;pages/home/home&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/message/message&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/contact/contact&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/index/index&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>保存之后就自动在<code>pages</code>目录下生成了对应的文件夹</p></blockquote><p>三、配置 tabBar 选项</p><ol><li>打开 app.json 配置文件，和 pages 、 window 平级，新增 tabBar 节点</li><li>tabBar 节点中，新增 list 数组，这个数组中存放的，是每个 tab 项的配置对象</li><li>在 list 数组中，新增每一个 tab 项的配置对象。对象中包含的属性如下： <ul><li>pagePath 指定当前 tab 对应的页面路径【必填】</li><li>text 指定当前 tab 上按钮的文字【必填】</li><li>iconPath 指定当前 tab 未选中时候的图片路径【可选】</li><li>selectedIconPath 指定当前 tab 被选中后高亮的图片路径【可选】</li></ul></li></ol><p>代码如下：</p><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;pages/home/home&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/message/message&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/contact/contact&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;pages/index/index&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;window&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;backgroundTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dark&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#2b4b6b&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;enablePullDownRefresh&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#efefef&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;onReachBottomDistance&quot;</span><span class="token operator">:</span> <span class="token number">50</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v2&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sitemapLocation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sitemap.json&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/home/home&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/images/svg/home1.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/images/svg/home2.png&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/message/message&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;消息&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/images/svg/message.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/images/svg/message-active.png&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/contact/contact&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;联系人&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/images/svg/contact.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/images/svg/contact-active.png&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">icon格式</p><p>仅支持 .png、.jpg、.jpeg 格式</p></div><h2 id="_4、页面配置" tabindex="-1">4、页面配置 <a class="header-anchor" href="#_4、页面配置" aria-hidden="true">#</a></h2><ol><li>小程序中，每个页面都有自己的 .json 配置文件，用来对当前页面的窗口外观、页面效果等进行配 置。</li><li>小程序中， app.json 中的 window 节点，可以全局配置小程序中每个页面的窗口表现。 如果某些小程序页面想要拥有特殊的窗口表现，此时，页面级别的 .json 配置文件就可以实现这种需 求。</li><li>注意：当页面配置与全局配置冲突时，根据就近原则，最终的效果以页面配置为准。</li></ol><h2 id="_5、网络数据请求" tabindex="-1">5、网络数据请求 <a class="header-anchor" href="#_5、网络数据请求" aria-hidden="true">#</a></h2><p>如何在小程序中发起网络请求？</p><ol><li>该请求不能称作ajax请求，但是可以称为网络请求</li><li>考虑安全性，微信官方要求域名使用 https协议</li><li>配置后台的request的合法域名</li><li>小程序中的网络请求不存在跨域的问题</li></ol><p>出于安全性方面的考虑，小程序官方对数据接口的请求做出了如下两个限制：</p><ol><li>只能请求 HTTPS 类型的接口</li><li>必须将接口的域名添加到信任列表中</li></ol><div class="language-"><pre><code>配置步骤：登录微信小程序管理后台 -&gt; 开发 -&gt; 开发设置 -&gt; 服务器域名 -&gt; 修改 request 合法域名
</code></pre></div><p>注意事项：</p><ol><li>域名只支持 https 协议</li><li>域名不能使用 IP 地址或 localhost</li><li>域名必须经过 ICP 备案</li><li>服务器域名一个月内最多可申请 5 次修改</li></ol><p>发起 GET 请求：</p><p>调用微信小程序提供的 wx.request() 方法，可以发起 GET 数据请求</p><h3 id="_5-1、在页面刚加载时请求数据" tabindex="-1">5.1、在页面刚加载时请求数据 <a class="header-anchor" href="#_5-1、在页面刚加载时请求数据" aria-hidden="true">#</a></h3><p>在很多情况下，我们需要在页面刚加载的时候，自动请求一些初始化的数据。此时需要在页面的 onLoad 事件中调用获取数据的函数，示例代码如下：</p><div class="language-js"><pre><code>  data<span class="token operator">:</span> <span class="token punctuation">{</span>
    banners<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 生命周期函数--监听页面加载</span>
  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSwiper</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 获取轮播图数据</span>
  <span class="token function">getSwiper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token operator">:</span> <span class="token string">&#39;https://autumnfish.cn/banner?type=2&#39;</span><span class="token punctuation">,</span>
      method<span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          banners<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>banners <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>banners
          <span class="token comment">// banners: res.data.banners</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>banners<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_5-2、跳过-request-合法域名校验" tabindex="-1">5.2、跳过 request 合法域名校验 <a class="header-anchor" href="#_5-2、跳过-request-合法域名校验" aria-hidden="true">#</a></h3><p>如果后端仅仅提供了 http 协议的接口、暂时没有提供 https 协议的接口。</p><p>此时为了不耽误开发的进度，我们可以在微信开发者工具中，临时开启「开发环境不校验合法域名、 web-view(业务域名)、 TLS 版本及 HTTPS 证书」选项，跳过 request 合法域名的校验。</p><blockquote><p>注意： 跳过 request 合法域名校验的选项，仅限在开发与调试阶段使用！</p></blockquote><h3 id="_5-3、-关于-跨域-和-ajax-的说明" tabindex="-1">5.3、 关于 跨域 和 Ajax 的说明 <a class="header-anchor" href="#_5-3、-关于-跨域-和-ajax-的说明" aria-hidden="true">#</a></h3><p>跨域问题只存在于基于浏览器的 Web 开发中。由于小程序的宿主环境不是浏览器，而是微信客户端， 所以小 程序中不存在跨域的问题。</p><p>Ajax 技术的核心是依赖于浏览器中的 XMLHttpRequest 这个对象，由于小程序的宿主环境是微信客户 端，所 以小程序中不能叫做“发起 Ajax 请求”，而是叫做“发起网络数据请求”。</p></div></div><footer class="page-footer" data-v-8fcebc32 data-v-5c96fb00><div class="edit" data-v-5c96fb00><div class="edit-link" data-v-5c96fb00 data-v-55695e90><!----></div></div><div class="updated" data-v-5c96fb00><!----></div></footer><!----><!--[--><!--[--><!----><!--]--><!--[--><!----><!--]--><!--]--></div></main></div><!----><!--]--><footer data-v-c1f40558> Copyright © 2019-2022 | MIT License </footer><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"1664d5de\",\"archives.md\":\"a93e3c02\",\"index.md\":\"6066b00b\",\"posts_ajax.md\":\"8bb4e762\",\"posts_git.md\":\"25f6a723\",\"posts_react.md\":\"62c6d271\",\"posts_es6模块化.md\":\"84b14997\",\"posts_npm使用手册.md\":\"0d5399ce\",\"posts_npm命令发生的事.md\":\"34a2fd25\",\"posts_vue3快速上手.md\":\"1a8c493c\",\"posts_wechat-01.md\":\"b5cf39a5\",\"posts_wechat-02.md\":\"caaebcbb\",\"posts_wechat-03.md\":\"e9bb856f\",\"posts_wechat-04.md\":\"0082938c\",\"posts_wechat-05.md\":\"dc34dbbe\",\"posts_微信小程序封装请求响应拦截器.md\":\"9c885644\",\"tags.md\":\"3781aadb\"}")</script>
    <script type="module" async src="/KBLOG_2/assets/app.469c13bb.js"></script>
    
  </body>
</html>