<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reactåˆé˜¶ | KevinBlog</title>
    <meta name="description" content="React">
    <link rel="stylesheet" href="/KBLOG_2/assets/style.699c32a0.css">
    <link rel="modulepreload" href="/KBLOG_2/assets/Home.94f814a0.js">
    <link rel="modulepreload" href="/KBLOG_2/assets/app.bb1174c4.js">
    <link rel="modulepreload" href="/KBLOG_2/assets/posts_React.md.fbe7f0cb.lean.js">
    
    <link rel="icon" type="image/png" href="/haimianbaobao.png">
  <meta name="author" content="Kevin">
  <meta property="og:title" content="Home">
  <meta property="og:description" content="Home of Kevin">
  <meta name="twitter:title" content="Reactåˆé˜¶ | KevinBlog">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><div class="no-sidebar theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/KBLOG_2/" aria-label="KevinBlog, back to home" data-v-40587210 data-v-016a8bd8><img class="logo" src="/KBLOG_2/haimianbaobao.png" alt="Logo" data-v-016a8bd8> KevinBlog</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/" data-v-49fe041d>ğŸ¡Home <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/tags" data-v-49fe041d>ğŸ”–Tags <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/archives" data-v-49fe041d>ğŸ“ƒArchives <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://vue3js.cn/interview/" target="_blank" rel="noopener noreferrer" data-v-49fe041d>é¢è¯•å®˜é—®ç³»åˆ— <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://www.yuque.com/cuggz/interview/gme0bw" target="_blank" rel="noopener noreferrer" data-v-49fe041d>è¯­é›€å‰ç«¯é¢è¯•é¢˜æ€»ç»“ <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://www.html5iq.com/index.html" target="_blank" rel="noopener noreferrer" data-v-49fe041d>å‰ç«¯çŸ¥è¯†åº“ <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="toggleTheme" data-v-f68cd400><div class="light" data-v-f68cd400>ğŸ”†</div></div><!--]--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/" data-v-49fe041d>ğŸ¡Home <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/tags" data-v-49fe041d>ğŸ”–Tags <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/KBLOG_2/archives" data-v-49fe041d>ğŸ“ƒArchives <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://vue3js.cn/interview/" target="_blank" rel="noopener noreferrer" data-v-49fe041d>é¢è¯•å®˜é—®ç³»åˆ— <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://www.yuque.com/cuggz/interview/gme0bw" target="_blank" rel="noopener noreferrer" data-v-49fe041d>è¯­é›€å‰ç«¯é¢è¯•é¢˜æ€»ç»“ <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://www.html5iq.com/index.html" target="_blank" rel="noopener noreferrer" data-v-49fe041d>å‰ç«¯çŸ¥è¯†åº“ <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--[--><!----><!--]--><!--[--><h1 class="title" data-v-cda39220></h1><div class="category" data-v-4c27e764><ul data-v-4c27e764><!--[--><li class="header" data-v-4c27e764><a href="#react-1" class="header-h1" data-v-4c27e764>React</a><!----></li><li class="header" data-v-4c27e764><a href="#jsx" class="header-h1" data-v-4c27e764>JSX</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#jsxåˆ°åº•æ˜¯ä»€ä¹ˆ" class="header-h2" data-v-4c27e764>JSXåˆ°åº•æ˜¯ä»€ä¹ˆ?</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#åœ¨-jsx-ä¸­åµŒå…¥è¡¨è¾¾å¼" class="header-h2" data-v-4c27e764>åœ¨ JSX ä¸­åµŒå…¥è¡¨è¾¾å¼</a></li></ul></li><li class="header" data-v-4c27e764><a href="#å°†ä¸€ä¸ªå…ƒç´ æ¸²æŸ“ä¸º-dom" class="header-h1" data-v-4c27e764>å°†ä¸€ä¸ªå…ƒç´ æ¸²æŸ“ä¸º DOM</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_17version" class="header-h2" data-v-4c27e764>17version</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#_18version" class="header-h2" data-v-4c27e764>18version</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#æ·±å…¥jsx-è¯­æ³•ç³–" class="header-h2" data-v-4c27e764>æ·±å…¥JSX-è¯­æ³•ç³–</a></li></ul></li><li class="header" data-v-4c27e764><a href="#å‡½æ•°ç»„ä»¶ä¸-class-ç»„ä»¶" class="header-h1" data-v-4c27e764>å‡½æ•°ç»„ä»¶ä¸ class ç»„ä»¶</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#æ¸²æŸ“å‡½æ•°ç»„ä»¶-æ— çŠ¶æ€é«˜æ€§èƒ½" class="header-h2" data-v-4c27e764>æ¸²æŸ“å‡½æ•°ç»„ä»¶(æ— çŠ¶æ€é«˜æ€§èƒ½)</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#æ¸²æŸ“å¤šä¸ªç»„ä»¶" class="header-h2" data-v-4c27e764>æ¸²æŸ“å¤šä¸ªç»„ä»¶</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#classç»„ä»¶-æœ‰çŠ¶æ€" class="header-h2" data-v-4c27e764>classç»„ä»¶(æœ‰çŠ¶æ€)</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#classç»„ä»¶çš„çŠ¶æ€state" class="header-h2" data-v-4c27e764>classç»„ä»¶çš„çŠ¶æ€state</a></li></ul></li><li class="header" data-v-4c27e764><a href="#propsæ¥æ”¶æ•°æ®" class="header-h1" data-v-4c27e764>propsæ¥æ”¶æ•°æ®</a><!----></li><li class="header" data-v-4c27e764><a href="#å•å‘æ•°æ®æµ" class="header-h1" data-v-4c27e764>å•å‘æ•°æ®æµ</a><!----></li><li class="header" data-v-4c27e764><a href="#ç»„ä»¶é€šè®¯" class="header-h1" data-v-4c27e764>ç»„ä»¶é€šè®¯</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#çˆ¶åˆ°å­" class="header-h2" data-v-4c27e764>çˆ¶åˆ°å­</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#å­åˆ°çˆ¶" class="header-h2" data-v-4c27e764>å­åˆ°çˆ¶</a></li></ul></li><li class="header" data-v-4c27e764><a href="#reactæ ¸å¿ƒæ€æƒ³-çŠ¶æ€ä¸å¯å˜" class="header-h1" data-v-4c27e764>Reactæ ¸å¿ƒæ€æƒ³:çŠ¶æ€ä¸å¯å˜</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#this-setstateä¿®æ”¹çŠ¶æ€çš„å”¯ä¸€æ–¹å¼" class="header-h2" data-v-4c27e764>this.setStateä¿®æ”¹çŠ¶æ€çš„å”¯ä¸€æ–¹å¼</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#stateæ³¨æ„äº‹é¡¹" class="header-h2" data-v-4c27e764>stateæ³¨æ„äº‹é¡¹</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#setstate" class="header-h2" data-v-4c27e764>setState</a></li></ul></li><li class="header" data-v-4c27e764><a href="#äº‹ä»¶" class="header-h1" data-v-4c27e764>äº‹ä»¶</a><!----></li><li class="header" data-v-4c27e764><a href="#å—æ§ç»„ä»¶-è¡¨å•" class="header-h1" data-v-4c27e764>å—æ§ç»„ä»¶-è¡¨å•</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#onchange" class="header-h2" data-v-4c27e764>onChange</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#éå—æ§ç»„ä»¶-ref" class="header-h2" data-v-4c27e764>éå—æ§ç»„ä»¶-ref</a></li></ul></li><li class="header" data-v-4c27e764><a href="#hooks" class="header-h1" data-v-4c27e764>Hooks</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#ä¸ºä»€ä¹ˆè¦æœ‰-hooks" class="header-h2" data-v-4c27e764>ä¸ºä»€ä¹ˆè¦æœ‰ Hooks</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#hooksæ¸è¿›ç­–ç•¥" class="header-h2" data-v-4c27e764>hooksæ¸è¿›ç­–ç•¥</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#usestate-åŸºæœ¬ä½¿ç”¨" class="header-h2" data-v-4c27e764>useState-åŸºæœ¬ä½¿ç”¨</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#usestateçš„è¯»å–å’Œä½¿ç”¨" class="header-h2" data-v-4c27e764>useStateçš„è¯»å–å’Œä½¿ç”¨</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#useeffect-å‰¯ä½œç”¨ä»‹ç»" class="header-h2" data-v-4c27e764>useEffect å‰¯ä½œç”¨ä»‹ç»</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#useeffect-åŸºæœ¬ä½¿ç”¨" class="header-h2" data-v-4c27e764>useEffect-åŸºæœ¬ä½¿ç”¨</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#useeffectç¬¬äºŒä¸ªå‚æ•°" class="header-h2" data-v-4c27e764>useEffectç¬¬äºŒä¸ªå‚æ•°</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç©ºæ•°ç»„" class="header-h2" data-v-4c27e764>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç©ºæ•°ç»„</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#useeffectå‘é€è¯·æ±‚" class="header-h2" data-v-4c27e764>useEffectå‘é€è¯·æ±‚</a></li></ul></li><li class="header" data-v-4c27e764><a href="#å…¶ä»–" class="header-h1" data-v-4c27e764>å…¶ä»–</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#é‡Šæ”¾é¡¹ç›®é…ç½®æ–‡ä»¶" class="header-h2" data-v-4c27e764>é‡Šæ”¾é¡¹ç›®é…ç½®æ–‡ä»¶</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#è·¯ç”±é‡å®šå‘" class="header-h2" data-v-4c27e764>è·¯ç”±é‡å®šå‘</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#craco-cracoé…ç½®è·¯å¾„åˆ«å" class="header-h2" data-v-4c27e764>@craco/cracoé…ç½®è·¯å¾„åˆ«å</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#åˆ«åè·¯å¾„æç¤º" class="header-h2" data-v-4c27e764>@åˆ«åè·¯å¾„æç¤º</a></li></ul></li><li class="header" data-v-4c27e764><a href="#redux" class="header-h1" data-v-4c27e764>Redux</a><!----></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#createstoreè¢«åºŸå¼ƒ" class="header-h2" data-v-4c27e764>createStoreè¢«åºŸå¼ƒ</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#å®‰è£…" class="header-h2" data-v-4c27e764>å®‰è£…</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#ä½¿ç”¨" class="header-h2" data-v-4c27e764>ä½¿ç”¨</a></li></ul></li><li class="header" data-v-4c27e764><!----><ul data-v-4c27e764><li data-v-4c27e764><a href="#dispatch" class="header-h2" data-v-4c27e764>Dispatch</a></li></ul></li><!--]--></ul></div><!--]--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h1 id="react" tabindex="-1">React <a class="header-anchor" href="#react" aria-hidden="true">#</a></h1><h2 id="react-1" tabindex="-1">React <a class="header-anchor" href="#react-1" aria-hidden="true">#</a></h2><p>React å¹¶ä¸æ˜¯ä¸€ä¸ª SPA æ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ä¸ªè§†å›¾åº“ã€‚ä¹Ÿå°± æ˜¯ MVC28ï¼ˆModel View Controllerï¼Œæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨.èƒ½ä»…ä»…æ˜¯æŠŠç»„ä»¶æ¸²æŸ“ æˆæµè§ˆå™¨ä¸­çš„å¯è§å…ƒç´ .ä½†æ˜¯ï¼Œå›´ç»• React å‘¨è¾¹çš„æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿè®©æ„å»ºå•é¡µé¢åº”ç”¨æˆä¸ºå¯èƒ½ã€‚å…¶ä»–çš„ç¬¬ä¸€ä»£æ¡†æ¶å°è¯•ä¸€æ¬¡æ€§ è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œè€Œ React ä»…ä»…å¸®åŠ©ä½ æ„å»ºè§†å›¾å±‚ã€‚å®ƒæ›´å¤šçš„æ˜¯ä¸€ä¸ªåº“è€Œéæ¡†æ¶ã€‚å…¶èƒŒåçš„ æ€è·¯æ˜¯ï¼šåº”ç”¨çš„è§†å›¾åº”è¯¥æ˜¯ä¸€ç³»åˆ—å±‚æ¬¡åˆ†æ˜çš„å¯ç»„åˆçš„ç»„ä»¶ã€‚</p><h2 id="jsx" tabindex="-1">JSX <a class="header-anchor" href="#jsx" aria-hidden="true">#</a></h2><h3 id="jsxåˆ°åº•æ˜¯ä»€ä¹ˆ" tabindex="-1">JSXåˆ°åº•æ˜¯ä»€ä¹ˆ? <a class="header-anchor" href="#jsxåˆ°åº•æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a></h3><p>JSXæ˜¯ä¸€ç§JavaScriptçš„è¯­æ³•æ‰©å±•ï¼Œé¦–å…ˆåœ¨<a href="https://baike.baidu.com/item/React/18077599" target="_blank" rel="noopener noreferrer">React</a>ä¸­è¢«è¿›å…¥ï¼Œå…¶æ ¼å¼æ¯”è¾ƒåƒæ˜¯æ¨¡ç‰ˆè¯­è¨€ï¼Œä½†äº‹å®ä¸Šå®Œå…¨æ˜¯åœ¨<a href="https://baike.baidu.com/item/JavaScript/321142" target="_blank" rel="noopener noreferrer">JavaScript</a>å†…éƒ¨å®ç°çš„ã€‚å…ƒç´ æ˜¯æ„æˆReactåº”ç”¨çš„æœ€å°å•ä½ï¼ŒJSXå°±æ˜¯ç”¨æ¥å£°æ˜Reactå½“ä¸­çš„å…ƒç´ ã€‚Reactä¸»è¦ä½¿ç”¨JSXæ¥æè¿°ç”¨æˆ·ç•Œé¢ï¼Œä½†Reactå¹¶ä¸å¼ºåˆ¶è¦æ±‚ä½¿ç”¨JSX [1] ï¼Œè€ŒJSXä¹Ÿåœ¨Reactä¹‹å¤–çš„æ¡†æ¶å¾—åˆ°äº†å¹¿æ³›çš„æ”¯æŒï¼ŒåŒ…æ‹¬Vue.js [3] ï¼ŒSolid [2] ç­‰ã€‚</p><h3 id="åœ¨-jsx-ä¸­åµŒå…¥è¡¨è¾¾å¼" tabindex="-1">åœ¨ JSX ä¸­åµŒå…¥è¡¨è¾¾å¼ <a class="header-anchor" href="#åœ¨-jsx-ä¸­åµŒå…¥è¡¨è¾¾å¼" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&#39;Josh Perez&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ JSX è¯­æ³•ä¸­ï¼Œä½ å¯ä»¥åœ¨å¤§æ‹¬å·å†…æ”¾ç½®ä»»ä½•æœ‰æ•ˆçš„ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Expressions" target="_blank" rel="noopener noreferrer">JavaScript è¡¨è¾¾å¼</a></p><p>ç¤ºä¾‹:è°ƒç”¨ JavaScript å‡½æ•° <code>formatName(user)</code> çš„ç»“æœï¼Œå¹¶å°†ç»“æœåµŒå…¥åˆ° <code>&lt;h1&gt;</code> å…ƒç´ ä¸­ã€‚</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">formatName</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> user<span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&#39; &#39;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> <span class="token string">&#39;Harper&#39;</span><span class="token punctuation">,</span>
    lastName<span class="token operator">:</span> <span class="token string">&#39;Perez&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>
        Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token function">formatName</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">!</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Hello, Harper Perez!</span>
</code></pre></div><h2 id="å°†ä¸€ä¸ªå…ƒç´ æ¸²æŸ“ä¸º-dom" tabindex="-1">å°†ä¸€ä¸ªå…ƒç´ æ¸²æŸ“ä¸º DOM <a class="header-anchor" href="#å°†ä¸€ä¸ªå…ƒç´ æ¸²æŸ“ä¸º-dom" aria-hidden="true">#</a></h2><h3 id="_17version" tabindex="-1">17version <a class="header-anchor" href="#_17version" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_18version" tabindex="-1">18version <a class="header-anchor" href="#_18version" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello world<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./app&#39;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="æ·±å…¥jsx-è¯­æ³•ç³–" tabindex="-1">æ·±å…¥JSX-è¯­æ³•ç³– <a class="header-anchor" href="#æ·±å…¥jsx-è¯­æ³•ç³–" aria-hidden="true">#</a></h3><p>å®é™…ä¸Šï¼ŒJSX ä»…ä»…åªæ˜¯ <code>React.createElement(component, props, ...children)</code> å‡½æ•°çš„è¯­æ³•ç³–ã€‚æ¯”å¦‚ä¸Šé¢çš„ JSX ä»£ç ï¼š</p><div class="language-js"><pre><code><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello world<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token comment">//ä¼šç¼–è¯‘ä¸º</span>
React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="å‡½æ•°ç»„ä»¶ä¸-class-ç»„ä»¶" tabindex="-1">å‡½æ•°ç»„ä»¶ä¸ class ç»„ä»¶ <a class="header-anchor" href="#å‡½æ•°ç»„ä»¶ä¸-class-ç»„ä»¶" aria-hidden="true">#</a></h2><h3 id="æ¸²æŸ“å‡½æ•°ç»„ä»¶-æ— çŠ¶æ€é«˜æ€§èƒ½" tabindex="-1">æ¸²æŸ“å‡½æ•°ç»„ä»¶(æ— çŠ¶æ€é«˜æ€§èƒ½) <a class="header-anchor" href="#æ¸²æŸ“å‡½æ•°ç»„ä»¶-æ— çŠ¶æ€é«˜æ€§èƒ½" aria-hidden="true">#</a></h3><p>å®šä¹‰ç»„ä»¶æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç¼–å†™ JavaScript å‡½æ•°ï¼š</p><div class="language-js"><pre><code><span class="token comment">//ä¹‹å‰æˆ‘ä»¬é‡åˆ°çš„ React å…ƒç´ éƒ½åªæ˜¯ DOM æ ‡ç­¾ï¼š</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>div <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">//ä¸è¿‡ï¼ŒReact å…ƒç´ ä¹Ÿå¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç»„ä»¶ï¼š</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">//å½“ React å…ƒç´ ä¸ºç”¨æˆ·è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå°† JSX æ‰€æ¥æ”¶çš„å±æ€§ï¼ˆattributesï¼‰ä»¥åŠå­ç»„ä»¶ï¼ˆchildrenï¼‰è½¬æ¢ä¸ºå•ä¸ªå¯¹è±¡ä¼ é€’ç»™ç»„ä»¶ï¼Œè¿™ä¸ªå¯¹è±¡è¢«ç§°ä¹‹ä¸º â€œpropsâ€ã€‚</span>

<span class="token comment">//ä¸‹é¢è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ React ç»„ä»¶ï¼Œå› ä¸ºå®ƒæ¥æ”¶å”¯ä¸€å¸¦æœ‰æ•°æ®çš„ â€œpropsâ€ï¼ˆä»£è¡¨å±æ€§ï¼‰å¯¹è±¡ä¸å¹¶è¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚</span>
<span class="token comment">//è¿™ç±»ç»„ä»¶è¢«ç§°ä¸ºâ€œå‡½æ•°ç»„ä»¶â€ï¼Œå› ä¸ºå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ JavaScript å‡½æ•°ã€‚</span>
<span class="token comment">//å‡½æ•°ç»„ä»¶</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//å‡½æ•°ç»„ä»¶å¿…é¡»æœ‰è¿”å›å€¼ï¼Œè¡¨ç¤ºè¯¥ç»„ä»¶çš„ UI ç»“æ„</span>
    <span class="token comment">//å¦‚æœä¸éœ€è¦æ¸²æŸ“ä»»ä½•å†…å®¹ï¼Œåˆ™è¿”å› null</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token comment">//æ¸²æŸ“ç»„ä»¶</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä½¿ç”¨ç»„ä»¶//Hello, Sara</span>

<span class="token comment">//å½“ç„¶ä½ å¯ä»¥è¿™æ ·å»æ¸²æŸ“ä¸€ä¸ªç»„ä»¶</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Hello, Sara//æ•ˆæœæ˜¯ä¸€æ ·çš„</span>

<span class="token comment">//ç»„ä»¶å°±åƒHTMLæ ‡ç­¾ä¸€æ ·å¯ä»¥è¢«æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚ç»„ä»¶è¡¨ç¤ºçš„æ˜¯ä¸€æ®µç»“æ„å†…å®¹</span>
<span class="token comment">//å¯¹äºå‡½æ•°ç»„ä»¶æ¥è¯´ï¼Œå‡½æ•°è¿”å›å€¼çš„å†…å®¹å°±æ˜¯æ¸²æŸ“çš„å†…å®¹</span>

<span class="token comment">//ä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ‡ç­¾æ¸²æŸ“å…ƒç´ </span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Welcome<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Welcome<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªå‡½æ•°ç»„ä»¶æ¸²æŸ“æ˜¯æ€ä¹ˆæ‰§è¡Œçš„:</p><ol><li>æˆ‘ä»¬è°ƒç”¨ <code>root.render()</code> å‡½æ•°ï¼Œå¹¶ä¼ å…¥ <code>&lt;Welcome name=&quot;Sara&quot; /&gt;</code> ä½œä¸ºå‚æ•°ã€‚</li><li>React è°ƒç”¨ <code>Welcome</code> ç»„ä»¶ï¼Œå¹¶å°† <code>{name: &#39;Sara&#39;}</code> ä½œä¸º props ä¼ å…¥ã€‚</li><li><code>Welcome</code> ç»„ä»¶å°† <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code> å…ƒç´ ä½œä¸ºè¿”å›å€¼ã€‚</li><li>React DOM å°† DOM é«˜æ•ˆåœ°æ›´æ–°ä¸º <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code>ã€‚</li></ol><div class="tip custom-block"><p class="custom-block-title">ç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´</p><p>React ä¼šå°†ä»¥å°å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶è§†ä¸ºåŸç”Ÿ DOM æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œ<code>&lt;div /&gt;</code> ä»£è¡¨ HTML çš„ div æ ‡ç­¾ï¼Œè€Œ <code>&lt;Welcome /&gt;</code> åˆ™ä»£è¡¨ä¸€ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”éœ€åœ¨ä½œç”¨åŸŸå†…ä½¿ç”¨ <code>Welcome</code>ã€‚</p><ol><li>å‡½æ•°ç»„ä»¶æ— çŠ¶æ€(state),é™æ€,ä¸ä¼šå‘ç”Ÿå˜åŒ–(ä¸è€ƒè™‘hooksçš„æƒ…å†µä¸‹)</li><li>ä¸èƒ½è‡ªå·±æä¾›æ•°æ®</li></ol></div><h3 id="æ¸²æŸ“å¤šä¸ªç»„ä»¶" tabindex="-1">æ¸²æŸ“å¤šä¸ªç»„ä»¶ <a class="header-anchor" href="#æ¸²æŸ“å¤šä¸ªç»„ä»¶" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">import</span> Hello <span class="token keyword">from</span> <span class="token string">&#39;./hello.js&#39;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&#39;./home.js&#39;</span>
<span class="token comment">//ç±»ç»„ä»¶</span>
<span class="token comment">// import React from &quot;react&quot;;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Hello <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span>

<span class="token comment">//hello.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">Hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello ä½ å¥½<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Hello
<span class="token comment">//home.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>è¿™æ˜¯é¦–é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Home
</code></pre></div><h3 id="classç»„ä»¶-æœ‰çŠ¶æ€" tabindex="-1">classç»„ä»¶(æœ‰çŠ¶æ€) <a class="header-anchor" href="#classç»„ä»¶-æœ‰çŠ¶æ€" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token comment">//ä½ åŒæ—¶è¿˜å¯ä»¥ä½¿ç”¨ ES6 çš„ classæ¥å®šä¹‰ç»„ä»¶ï¼š</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å®šä¹‰ES6 classç»„ä»¶</span>
<span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>

<span class="token number">1.</span> ç±»ç»„ä»¶åº”è¯¥ç»§æ‰¿ <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">React.Component</span><span class="token template-punctuation string">`</span></span> çˆ¶ç±»ï¼Œä»è€Œä½¿ç”¨çˆ¶ç±»ä¸­æä¾›çš„æ–¹æ³•æˆ–å±æ€§
<span class="token number">2.</span> ç±»ç»„ä»¶å¿…é¡»æä¾› render æ–¹æ³•
<span class="token number">3.</span> render æ–¹æ³•å¿…é¡»æœ‰è¿”å›å€¼ï¼Œè¡¨ç¤ºè¯¥ç»„ä»¶çš„ <span class="token constant">UI</span> ç»“æ„
<span class="token number">4.</span> çŠ¶æ€ï¼ˆstateï¼‰æ˜¯ç»„ä»¶çš„ç§æœ‰æ•°æ®

<span class="token comment">//ä¹Ÿå¯ä»¥å•ç‹¬å¼•å…¥Component</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="classç»„ä»¶çš„çŠ¶æ€state" tabindex="-1">classç»„ä»¶çš„çŠ¶æ€state <a class="header-anchor" href="#classç»„ä»¶çš„çŠ¶æ€state" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
<span class="token comment">// ä¸ºç»„ä»¶æä¾›çŠ¶æ€</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token comment">//ä»è¯­æ³•å±‚é¢çœ‹stateå°±æ˜¯ç±»çš„å®ä¾‹å±æ€§</span>
        count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        isLoading<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Welcome</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//object</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token comment">// thiså°±æ˜¯å½“å‰ç±»çš„å®ä¾‹å¯¹è±¡</span>
            <span class="token comment">// äº¤ç»™äº†react,reactå†…éƒ¨å›å» new ä¸€ä¸‹</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>è®¡æ•°å™¨ï¼š<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="propsæ¥æ”¶æ•°æ®" tabindex="-1">propsæ¥æ”¶æ•°æ® <a class="header-anchor" href="#propsæ¥æ”¶æ•°æ®" aria-hidden="true">#</a></h2><p>å‡½æ•°ç»„ä»¶:<code>props</code>æ¥æ”¶æ•°æ®</p><div class="language-js"><pre><code>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// props çš„å€¼å°±æ˜¯ï¼š{ name: &#39;jack&#39;, age: 19 }</span>
<span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//propsæ¥æ”¶æ•°æ®</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>æˆ‘å«<span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span>ä»Šå¹´<span class="token punctuation">{</span> props<span class="token punctuation">.</span>age<span class="token punctuation">}</span>å²<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token string">&quot;jack&quot;</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¼ é€’æ•°æ®</span>
<span class="token comment">//è¾“å‡º:æˆ‘å«jackä»Šå¹´19å²</span>

</code></pre></div><p>classç»„ä»¶: <code>this.props</code>æ¥æ”¶æ•°æ®</p><div class="language-js"><pre><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// props çš„å€¼å°±æ˜¯ï¼š{ name: &#39;jack&#39;, age: 19 }</span>
<span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>æˆ‘å«<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span>ä»Šå¹´<span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span>å²<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token string">&quot;jack&quot;</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¼ é€’æ•°æ®</span>
<span class="token comment">//è¾“å‡º:æˆ‘å«jackä»Šå¹´19å²</span>
</code></pre></div><h2 id="å•å‘æ•°æ®æµ" tabindex="-1">å•å‘æ•°æ®æµ <a class="header-anchor" href="#å•å‘æ•°æ®æµ" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><ol><li><strong>props æ˜¯åªè¯»å¯¹è±¡</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šåªèƒ½è¯»å–å¯¹è±¡ä¸­çš„å±æ€§ï¼Œæ— æ³•ä¿®æ”¹</li><li><strong>å•å‘æ•°æ®æµ</strong>ï¼Œä¹Ÿå«åšï¼šè‡ªé¡¶è€Œä¸‹ï¼ˆè‡ªä¸Šè€Œä¸‹ï¼‰çš„æ•°æ®æµ</li><li>çˆ¶ç»„ä»¶ä¸­çš„æ•°æ®å¯ä»¥é€šè¿‡ props ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå¹¶ä¸”ï¼Œå½“çˆ¶ç»„ä»¶ä¸­çš„æ•°æ®æ›´æ–°æ—¶ï¼Œå­ç»„ä»¶å°±ä¼šè‡ªåŠ¨æ¥æ”¶åˆ°æœ€æ–°çš„æ•°æ®</li><li>ç±»æ¯”ï¼šå°±åƒç€‘å¸ƒçš„æ°´ä¸€æ ·åªèƒ½ä»ä¸Šå¾€ä¸‹æµåŠ¨ï¼Œå¹¶ä¸”ï¼Œå½“ä¸Šæ¸¸çš„æ°´å˜æµ‘æµŠï¼Œä¸‹æ¸¸çš„æ°´ä¹Ÿä¼šå—åˆ°å½±å“</li><li>å¯ä»¥ä¼ é€’ä»»æ„æ•°æ®ï¼ˆæ•°å­— å­—ç¬¦ä¸² å¸ƒå°”ç±»å‹ æ•°ç»„ å¯¹è±¡ å‡½æ•° jsxï¼‰</li></ol></div><h2 id="ç»„ä»¶é€šè®¯" tabindex="-1">ç»„ä»¶é€šè®¯ <a class="header-anchor" href="#ç»„ä»¶é€šè®¯" aria-hidden="true">#</a></h2><h3 id="çˆ¶åˆ°å­" tabindex="-1">çˆ¶åˆ°å­ <a class="header-anchor" href="#çˆ¶åˆ°å­" aria-hidden="true">#</a></h3><p><strong>æ­¥éª¤</strong>ï¼š</p><ol><li><p>çˆ¶ç»„ä»¶æä¾›è¦ä¼ é€’çš„stateæ•°æ®</p></li><li><p>ç»™å­ç»„ä»¶æ ‡ç­¾æ·»åŠ å±æ€§ï¼Œå€¼ä¸º state ä¸­çš„æ•°æ®</p></li><li><p>å­ç»„ä»¶ä¸­é€šè¿‡ props æ¥æ”¶çˆ¶ç»„ä»¶ä¸­ä¼ é€’çš„æ•°æ®</p></li></ol><p><strong>æ ¸å¿ƒä»£ç </strong></p><p>çˆ¶ç»„ä»¶æä¾›æ•°æ®å¹¶ä¸”ä¼ é€’ç»™å­ç»„ä»¶</p><div class="language-jsx"><pre><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    money<span class="token operator">:</span> <span class="token number">10000</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> money <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æˆ‘æ˜¯çˆ¶ç»„ä»¶ï¼š</span><span class="token punctuation">{</span>money<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* å°†æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶ */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">money</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>money<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å­ç»„ä»¶æ¥æ”¶æ•°æ®</p><div class="language-jsx"><pre><code><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* æ¥æ”¶çˆ¶ç»„ä»¶ä¸­ä¼ é€’è¿‡æ¥çš„æ•°æ® */</span><span class="token punctuation">}</span><span class="token plain-text">
    	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æˆ‘æ˜¯å­ç»„ä»¶ -- </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>money<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å­åˆ°çˆ¶" tabindex="-1">å­åˆ°çˆ¶ <a class="header-anchor" href="#å­åˆ°çˆ¶" aria-hidden="true">#</a></h3><p>æ€è·¯å’Œvueæ˜¯ä¸€æ ·,åªä¸è¿‡æ²¡æœ‰vueé‚£äº›è¯­æ³•,å¾ˆç›´æ¥</p><div class="language-"><pre><code>
</code></pre></div><h2 id="reactæ ¸å¿ƒæ€æƒ³-çŠ¶æ€ä¸å¯å˜" tabindex="-1">Reactæ ¸å¿ƒæ€æƒ³:çŠ¶æ€ä¸å¯å˜ <a class="header-anchor" href="#reactæ ¸å¿ƒæ€æƒ³-çŠ¶æ€ä¸å¯å˜" aria-hidden="true">#</a></h2><div class="tip custom-block"><p class="custom-block-title">æ³¨æ„</p><p><em><strong>çŠ¶æ€ä¸å¯å˜å¹¶ä¸æ˜¯æŒ‡çš„çŠ¶æ€ä¸èƒ½å˜,è€Œæ˜¯ä¸è¦ç›´æ¥ä¿®æ”¹çŠ¶æ€çš„å€¼ï¼Œæ˜¯åŸºäºå½“å‰çŠ¶æ€åˆ›å»ºæ–°çš„çŠ¶æ€å€¼</strong></em></p><p><strong>çŠ¶æ€ä¸å¯å˜ä¹Ÿå¯ä»¥å«å•å‘æ•°æ®æµ</strong></p></div><p><strong>ä¸è¦ç›´æ¥ä¿®æ”¹ State</strong>.<strong>è€Œæ˜¯åº”è¯¥ä½¿ç”¨</strong> <code>setState()</code>.<strong>æ„é€ å‡½æ•°æ˜¯å”¯ä¸€å¯ä»¥ç»™ <code>this.state</code> èµ‹å€¼çš„åœ°æ–¹ã€‚</strong></p><h3 id="this-setstateä¿®æ”¹çŠ¶æ€çš„å”¯ä¸€æ–¹å¼" tabindex="-1">this.setStateä¿®æ”¹çŠ¶æ€çš„å”¯ä¸€æ–¹å¼ <a class="header-anchor" href="#this-setstateä¿®æ”¹çŠ¶æ€çš„å”¯ä¸€æ–¹å¼" aria-hidden="true">#</a></h3><p>reactå”¯ä¸€ä¿®æ”¹çŠ¶æ€çš„æ–¹å¼å°±æ˜¯<code>this.setState</code></p><ul><li>æ€æƒ³ï¼š<strong>æ•°æ®é©±åŠ¨è§†å›¾</strong>ï¼Œä¹Ÿå°±æ˜¯åªéœ€è¦ä¿®æ”¹æ•°æ®ï¼ˆçŠ¶æ€ï¼‰é‚£ä¹ˆé¡µé¢ï¼ˆè§†å›¾ï¼‰å°±ä¼šè‡ªåŠ¨åˆ·æ–° <ul><li>æ ¸å¿ƒï¼šæ•°æ®ï¼ï¼ï¼</li><li>ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬å…³å¿ƒçš„æ˜¯å¦‚ä½•ä¿®æ”¹æ•°æ®ï¼Œè€Œä¸å†æ˜¯å…³å¿ƒå¦‚ä½•ä¿®æ”¹DOM</li><li>å¹¶ä¸”ï¼Œæ³¨æ„ï¼šå°½é‡é¿å…ç›´æ¥æ‰‹åŠ¨ DOMï¼ˆé€šè¿‡ document.querySelector() è·å–åˆ°åˆ°DOMå¯¹è±¡ç„¶åå†æ“ä½œï¼‰ æ“ä½œï¼ï¼ï¼</li></ul></li><li>æ³¨æ„ï¼š<em>ä¸è¦ç›´æ¥ä¿®æ”¹ state ä¸­çš„å€¼ï¼Œè¿™æ˜¯æ— æ•ˆçš„</em>ï¼</li></ul><h3 id="stateæ³¨æ„äº‹é¡¹" tabindex="-1">stateæ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#stateæ³¨æ„äº‹é¡¹" aria-hidden="true">#</a></h3><div class="language-js"><pre><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  person<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;jack&#39;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ã€ä¸æ¨èã€‘ç›´æ¥ä¿®æ”¹å½“å‰å€¼çš„æ“ä½œï¼š</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">++</span>
<span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">// åªè¦æ˜¯æ•°ç»„ä¸­ç›´æ¥ä¿®æ”¹å½“å‰æ•°ç»„çš„æ–¹æ³•éƒ½ä¸èƒ½ç”¨ï¼</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;rose&#39;</span>

<span class="token comment">// ã€æ¨èã€‘ä¸æ˜¯ç›´æ¥ä¿®æ”¹å½“å‰å€¼ï¼Œè€Œæ˜¯åˆ›å»ºæ–°å€¼çš„æ“ä½œï¼š</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
  list<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  person<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>person<span class="token punctuation">,</span>
    <span class="token comment">// è¦ä¿®æ”¹çš„å±æ€§ï¼Œä¼šè¦†ç›–åŸæ¥çš„å±æ€§ï¼Œè¿™æ ·ï¼Œå°±å¯ä»¥è¾¾åˆ°ä¿®æ”¹å¯¹è±¡ä¸­å±æ€§çš„ç›®çš„äº†</span>
    name<span class="token operator">:</span> <span class="token string">&#39;rose&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="setstate" tabindex="-1">setState <a class="header-anchor" href="#setstate" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// import &#39;./index.css&#39;</span>
<span class="token comment">// import Comments from &#39;./Comments.js&#39;</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&#39;React&#39;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">&#39;https://facebook.github.io/react/&#39;</span><span class="token punctuation">,</span>
    author<span class="token operator">:</span> <span class="token string">&#39;Jordan Walke&#39;</span><span class="token punctuation">,</span>
    num_comments<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    points<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    objectID<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      list<span class="token operator">:</span> list<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onDismiss <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onDismiss</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">onDismiss</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">isNotId</span> <span class="token operator">=</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>objectID <span class="token operator">!==</span> id<span class="token punctuation">;</span>
    <span class="token keyword">const</span> updatedList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isNotId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> list<span class="token operator">:</span> updatedList <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span>
          <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>objectID<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>url<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>author<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>num_comments<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>points<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>button
                onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onDismiss</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>objectID<span class="token punctuation">)</span><span class="token punctuation">}</span>
                type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span>
              <span class="token operator">&gt;</span>
                Dismiss
              <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="äº‹ä»¶" tabindex="-1">äº‹ä»¶ <a class="header-anchor" href="#äº‹ä»¶" aria-hidden="true">#</a></h2><p>JSXä¸­æœ€å¥½ä¸è¦åŒ…å«å¤ªå¤šçš„é€»è¾‘,å¯ä»¥æŠ½ç¦»åˆ°å•ç‹¬çš„å‡½æ•°ä¸­</p><h2 id="å—æ§ç»„ä»¶-è¡¨å•" tabindex="-1">å—æ§ç»„ä»¶-è¡¨å• <a class="header-anchor" href="#å—æ§ç»„ä»¶-è¡¨å•" aria-hidden="true">#</a></h2><p>å—æ§ç»„ä»¶ï¼š<strong>valueå€¼å—åˆ°äº†reactçŠ¶æ€æ§åˆ¶çš„è¡¨å•å…ƒç´ </strong></p><h3 id="onchange" tabindex="-1">onChange <a class="header-anchor" href="#onchange" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        msg<span class="token operator">:</span> <span class="token string">&#39;hello react&#39;</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            msg<span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token comment">//æœ€æ–°å€¼</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input
                    type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
                    value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span>
                    onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token comment">//å…³é”®</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
<span class="token comment">//è¡¨å•valueçš„æ›´æ–°è¿‡ç¨‹:</span>
<span class="token number">1.</span> åœ¨æ–‡æœ¬æ¡†è¾“å…¥å†…å®¹å<span class="token punctuation">,</span>ä¼šè§¦å‘æ–‡æœ¬æ¡†çš„onChangeäº‹ä»¶
<span class="token number">2.</span> onChangeäº‹ä»¶è§¦å‘<span class="token punctuation">,</span>handleChangeä¸­çš„ä»£ç æ‰§è¡Œ
<span class="token number">3.</span> <span class="token function">handleChangeæ‰§è¡Œåæ‹¿åˆ°æ–‡æœ¬æ¡†æœ€æ–°çš„å€¼</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token number">4.</span> å°†æœ€æ–°çš„æ–‡æœ¬æ¡†å€¼äº¤ç»™äº†setState <span class="token punctuation">,</span>setStateæ›´æ–°äº†çŠ¶æ€
<span class="token number">5.</span> è°ƒç”¨setStateåçŠ¶æ€ä¼šæ›´æ–°<span class="token punctuation">,</span>åŒæ—¶<span class="token punctuation">,</span>ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“<span class="token punctuation">,</span>ä¼šé‡æ–°è°ƒç”¨render
<span class="token number">6.</span> renderé‡æ–°è°ƒç”¨å°±æ‹¿åˆ°äº†æ–‡æœ¬æ¡†æœ€æ–°çš„å€¼<span class="token punctuation">,</span>å¹¶ä¸”æŠŠæœ€æ–°çš„æ–‡æœ¬æ¡†å€¼æ¸²æŸ“åˆ°é¡µé¢ä¸Š
<span class="token number">7.</span> æ­¤æ—¶<span class="token punctuation">,</span>å°±çœ‹åˆ°æ–‡æœ¬æ¡†å˜åŒ–äº†        
</code></pre></div><h3 id="éå—æ§ç»„ä»¶-ref" tabindex="-1">éå—æ§ç»„ä»¶-ref <a class="header-anchor" href="#éå—æ§ç»„ä»¶-ref" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token comment">// 1 å¯¼å…¥ createRef å‡½æ•°ï¼ˆ ç”¨æ¥åˆ›å»º ref å¯¹è±¡ ï¼‰</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRef<span class="token punctuation">,</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
<span class="token comment">//è°ƒç”¨ createRef å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ª ref å¯¹è±¡</span>
<span class="token comment">//ref å¯¹è±¡çš„åç§°ï¼ˆtxtRefï¼‰å¯ä»¥æ˜¯ä»»æ„å€¼</span>
<span class="token comment">//å‘½åè¦è§„èŒƒï¼š txtï¼ˆDOM å…ƒç´ çš„è‡ªå·±æ ‡è¯†ï¼‰ + Ref</span>
    txtRef <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ–‡æœ¬æ¡†å¯¹åº”çš„ DOM å…ƒç´ </span>
        <span class="token comment">// console.log(this.txtRef.current)</span>

        <span class="token comment">// 4 è·å–æ–‡æœ¬æ¡†çš„å€¼ï¼š</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>è·å–æ–‡æœ¬æ¡†çš„å€¼<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
        <span class="token comment">//å°†åˆ›å»ºå¥½çš„ ref å¯¹è±¡ï¼Œè®¾ç½®ä¸º input æ ‡ç­¾çš„ ref å±æ€§å€¼</span>
        <span class="token comment">//ä½œç”¨ï¼šå°† ref å’Œ input DOM ç»‘å®šåˆ°ä¸€èµ·ï¼Œå°†æ¥åœ¨é€šè¿‡ this.txtRef æ‹¿åˆ°çš„å°±æ˜¯å½“å‰ DOM å¯¹è±¡</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>æ³¨æ„:</strong></p><ol><li>refæ˜¯ä¸ªå¯¹è±¡,å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªcurrentå±æ€§</li><li>currentå±æ€§çš„å€¼æ‰æ˜¯DOMå¯¹è±¡</li></ol><p><strong>æ‰“å°ç»“æœ:</strong></p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt=""></p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAo4AAAA2CAYAAABJCBjRAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAq7SURBVHhe7duxjty2FsZxP0ou4MJVkDKe1i4CpPCmj6tsEsBdqhRrIIWBwEGadIFxGyMGXKVIk8LYR3CzXZq0fgG/gK5IkdLh0SF1pNF4vXv/xQ8eiaRmRHHIT5r1nU/+c7cDAAAAlhAcAQAA4EJwBAAAgAvBEQAAAC53DodDBwAAACzhiSMAAABcCI4AAABwITgCAADAheAIAAAAF4IjAAAAXAiOAAAAcCE4AgAAwIXgCABHeP/7d+brFm89y5a2uo3nGFadpXZ7fLal/QCuF8ERAFbQgWZpWwvlNVZ9bU09L6ut3tfaL8k6+fiSrCvrefYBuH4Ex9viy9fdr5f/dv8N/nzdfW7V2eKLV92jv/7pHpzf7e49fds9/uvv7jOr3lqnOu41mD7/N93hj3+6x7/9bNab+7l70PfBo6ffdJ+c/90f4213+MKqt9KTN8M4CF78YtfZ2dmLf7tfn31rlrV9233/Z/qsl1fd919adbJfuovFOsdbup460KwJOLnummOEMi+rveSto9XKZLuWNXWDXL/e7vZ8d9oc53n2VeynqzO1/0Y50fUsDN/nsObY5fD6yIJjGDwnGDBhIP7xqrtnld02YeLbMzimL/QY8FQ//nT+dZy0snfnn4q297srUVZObO3j3ihxopuCRpz8Upnun/e/f91d3s9tRf3xGLnseJ8/u7oBwTHzhMIPExxb1zMor2ebbKd560lr6gbyPWqsNtZ2bX+NLK+9tvje5/Z8d9oc57kxOMa56cf7ZllbmNflPOZXf8/TXs8oPKzQ60x4rxOsPXFNcz9AuHmuMThaIZHgeLSTBMd0TXQ/3n/YvXv+sPtprBsmlK+6l/H1p93lczmZ6cmmcdybRnz+z34rg0Z7ch4my3gHHJ/AEhw/muBYuZ7aUgiyhDZWOPIca8v7SVveo/bZavXk/vza2ie3rXqSrDO4Pd+dttOd58cYHGvnufQ9zFqBzTzGidaejy04evvP63qCYxwYaZCkfeHEHvf7SnLwDE+octnUCWm/uEjxWHEwlG1Guq4o05/pwbk8xnwwj22Lwaffd92XPSzC488ll2+6s7FM/qzXswJiLTjKn2B6xy3y2fBEMT9ljJNCDpLhLliGynRXXD6R3CL0QR8enlR+mpc/2cvzDOc/WwjSsVIQKft9n4CyfXJuCQGqHxfymhqLnL34hbbyPOX4ClpjrGwrx9AQHF9P5WoM1sd0VguF+vOWdYrj6nHQb5+FPkjl+4z5Ui3oWObhZ97eqiPlcs2qG1h1NatNbbv2WrLq6H81q80pLY3HTd+d1hyr5qV9Qulwcx76q/wlI0g38WnejfI8FG748z7BMze//HHe7n1+WDB78inWhyPeczAEy1YYm9Z9qzysyfU8MZLHTzkll43ZIIRNuZ2OFTOJapPN8spIfqZwjm+7w7k4hjqf7Zljuf/W+PDBMXZ67aliOHmrLHXouF9vD50WL6R1B+G9qwgXXdQbLtJ0AcJ2HgDhjkImeL0ttcq0OKGpRXcwLOh6sZ5NQGZwLANSoTLQZYBuE5OXCEgyMOVA+XKXEJWCzXiOw/bFk/51nJzleQ4T/ViW2oR+i/tieZr8RfnsPdNEUaqN4VI8dzlZ7hIi0wI2ft6wPb++nqcmoc40plLfmm30GCq3h4U4b4trksvEMePnmvW1dQ7i+hl1ys+uttNCXW6na33E9dSKaytYdS1b6uo2S8eQ5bXXUtiv6XL5r2btr9XNZLmuu9R2rfocO9n23dHjdzLNOVpa0PV4XLXAW08Ah9A23bzP62y/qbXeL4nhcQiSIWTqYHjsjbQdDpdDUXUNrmaDkCl00BTbcQ4ZtmUuyLxPHMvPlc5j/DzDdl6L9Tm0ckWtzO6/9T5ocNRBbK4SHD3hZqxjHL8RHOMFLo47tbcGxGDpy26UuyYCOwBMZcYdrp4AzeCYF/a9n7qIO8ocINNElSeIeIeaJopjJ41BGUoK4dzVZB/Oezjn3H99+2dvuotQrwiLQ0jZ60mjTfaXVe41HyfWwmQvfkP/jU8+glxHhistBbGiXU+GQzm2pm1jQTXfxxj7s7Es6xjnEXjOZSc50KwJOqFsidUuyGW6Tq1NPp6HbufZ1vszWV5TayNf1+oexxhnhtXfnV5rjo3HU/X3YwW5+b4wF8u/g6zPx/JJZpD//ChrBMdePG5oZxx7jzVgWLNTTkjrfi1ADWoPpHq1bOC4uRyzg7G2xzJzzW9lgzIoLrYz2tplpaL/jHKPm/HEUT0JNMU6fcq22tcGRxx0on7c9gbHesfHCyPerz6ItNakFsq2B8dsNoGlL14x4HquJ47652g5oRg/TVt3oOsNk/f64Bja9f3XB4qLfvvsRf/aqC8Xh/E9HJOI1z59MB8n3uAY94nxUdRZCo6NcXU9wbH2Xem1zmWn6ylDTX4t93l46+t6W9/Po/Ze2pr9S59TlofXS/W3a82xk9XfHSHur4XEMKZD2XicpUDgsXdwXLIcHN89749drA1T2THB0X5ilvqw1mfh+94qs7JBq00S1vWQOaz2tTW/nQ2G86gHx+Mzx4184jhKYWXeQbWOC4GydVchAqc1EFQgHMUFpAyKvieO7QsQy8aLNnz2pUGYxbtWa8JJgWZanPV2shAco4UQ4CZ+lojb8e9Y8oSiJpei7BjDeZvBMYYFsSio7bMXV91FHxjDdpjcw+tZ/yWhvFa22W59oBa/SkiyFrZyfIXjyO3KmBJ1a31SD47zMW2PcWNBL67f8NnkE+F4nNo4rvTJXraEo0yHJOu1tvX9Qp0lVpvWtme/9xiZLLfqLrVfwx5/pfXfHSWMv+ocG9ruOTYdwTHOPerJ4ezG30v/x0dBHNO8Sd78ngvhsGevye3AVc0G1YySiJxh5oRKIG1ng1ZwPDZzLPffGtcTHCMR9uT+GOb6E4zEBZ09GctlQyfJCxc7UQ2GYV+iLlTe/+jpq/5YvuCo2wbjBS8+a3+OT/tzcl+wvEBmcoJJk1UmJ618JyuNE5dqpxfoI4w/SyTFZFL8QfQegSloBMdA9YOsFyf+3J8xWIhy3X97BOte2T979UH7eo5PPKQ8VtJ5j+2e9eddLH7q2LIfirbBNDZD39aC42xMF32rzyWYzkeey8WTcBx5rvq7Iq7nCYNjuJZ6O++Try1W29a2tS9s533ytaVVFljl+ZiSrpPreffX6mbyfba0X6c+x27/7rS+k41xepQQDvW1ynOMLrPmnvIn6VW/hKRflAbyP8fI90mfoXjCuO0922vxZPakrRLgJDsb9Ios0svHiftldmkEtdR2/OzNbNAOjsdkDm//eV1jcASwTVik5MKE65AXP2+ZtW21t/bl/WvL8v4Wq83SttWuZal+7T0kWY4l1lPI/zdLQQxbERyBG4fgCKCF4IjTITgCNw7BEUALwRGnQ3AEAACAC8ERAAAALgRHAAAAuNw5HA4dAAAAsIQnjgAAAHAhOAIAAMCF4AgAAAAXgiMAAABcCI4AAABwITgCAADAheAIAAAAF4IjAAAAXAiOAAAAcCE4AgAAwOXOvYc/mAUAAACAxBNHAAAAuBAcAQAA4EJwBAAAgAvBEQAAAC4ERwAAALgQHAEAAOBCcAQAAIALwREAAAAuBEcAAAC4EBwBAADgQnAEAACAC8ERAAAALgRHAAAAONzt/gcxejoMnbWZMgAAAABJRU5ErkJggg==" alt=""></p><blockquote><p><strong>å°½é‡é¿å…ä½¿ç”¨è¿™ç§æ–¹å¼</strong></p></blockquote><p><strong>éå—æ§ç»„ä»¶å€ŸåŠ©ref,ä½¿ç”¨åŸç”ŸDOMçš„æ–¹å¼æ¥è·å–è¡¨å•å…ƒç´ çš„å€¼</strong></p><ul><li>éå—æ§ç»„ä»¶é€šè¿‡Reactç»„ä»¶çš„çŠ¶æ€æ¥æ§åˆ¶è¡¨å•å…ƒç´ çš„å€¼</li><li>æ‰‹åŠ¨æ“ä½œDOMæ¥æ§åˆ¶</li><li>ref: ç”¨æ¥åœ¨Reactä¸­è·å–DOMå…ƒç´ </li></ul><p><strong>ä½•æ—¶ä½¿ç”¨ Refs:</strong></p><ul><li>ç®¡ç†ç„¦ç‚¹ï¼Œæ–‡æœ¬é€‰æ‹©æˆ–åª’ä½“æ’­æ”¾ã€‚</li><li>è§¦å‘å¼ºåˆ¶åŠ¨ç”»ã€‚</li><li>é›†æˆç¬¬ä¸‰æ–¹ DOM åº“ã€‚</li></ul><h2 id="hooks" tabindex="-1">Hooks <a class="header-anchor" href="#hooks" aria-hidden="true">#</a></h2><p><a href="https://zh-hans.reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener noreferrer">hookså®˜ç½‘æ–‡æ¡£</a></p><p><strong>hookæŒ‡çš„å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°</strong> <strong>ä»¥useå¼€å¤´</strong></p><p>ä¸º<strong>å‡½æ•°ç»„ä»¶</strong>æä¾›çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸç­‰åŸæœ¬ class ç»„ä»¶ä¸­æä¾›çš„ React åŠŸèƒ½</p><ul><li>å¯ä»¥ç†è§£ä¸ºé€šè¿‡ Hooks ä¸ºå‡½æ•°ç»„ä»¶é’©å…¥ class ç»„ä»¶çš„ç‰¹æ€§</li></ul><div class="tip custom-block"><p class="custom-block-title">æ³¨æ„</p><p>Hooks åªèƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œè‡ªæ­¤ï¼Œå‡½æ•°ç»„ä»¶æˆä¸º React çš„æ–°å® å„¿</p></div><h3 id="ä¸ºä»€ä¹ˆè¦æœ‰-hooks" tabindex="-1">ä¸ºä»€ä¹ˆè¦æœ‰ Hooks <a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦æœ‰-hooks" aria-hidden="true">#</a></h3><p>ä¸¤ä¸ªè§’åº¦ï¼š1 ç»„ä»¶çš„çŠ¶æ€é€»è¾‘å¤ç”¨ 2 class ç»„ä»¶è‡ªèº«çš„é—®é¢˜</p><ol><li><p>ç»„ä»¶çš„çŠ¶æ€é€»è¾‘å¤ç”¨ï¼š</p><ul><li>åœ¨ Hooks ä¹‹å‰ï¼Œç»„ä»¶çš„çŠ¶æ€é€»è¾‘å¤ç”¨ç»å†äº†ï¼šmixinsï¼ˆæ··å…¥ï¼‰ã€HOCsï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰ã€render-props ç­‰æ¨¡å¼</li><li>ï¼ˆæ—©å·²åºŸå¼ƒï¼‰mixins çš„é—®é¢˜ï¼š1 æ•°æ®æ¥æºä¸æ¸…æ™° 2 å‘½åå†²çª</li><li>HOCsã€render-props çš„é—®é¢˜ï¼šé‡æ„ç»„ä»¶ç»“æ„ï¼Œå¯¼è‡´ç»„ä»¶å½¢æˆ JSX åµŒå¥—åœ°ç‹±é—®é¢˜</li></ul></li><li><p>class ç»„ä»¶è‡ªèº«çš„é—®é¢˜ï¼š</p><ul><li>é€‰æ‹©ï¼šå‡½æ•°ç»„ä»¶å’Œ class ç»„ä»¶ä¹‹é—´çš„åŒºåˆ«ä»¥åŠä½¿ç”¨å“ªç§ç»„ä»¶æ›´åˆé€‚</li><li>éœ€è¦ç†è§£ class ä¸­çš„ this æ˜¯å¦‚ä½•å·¥ä½œçš„,æœ‰äº†ç®­å¤´å‡½æ•°åå¥½å¾ˆå¤š</li><li>ç›¸äº’å…³è”ä¸”éœ€è¦å¯¹ç…§ä¿®æ”¹çš„ä»£ç è¢«æ‹†åˆ†åˆ°ä¸åŒç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­</li></ul></li></ol><ul><li>ç›¸æ¯”äºå‡½æ•°ç»„ä»¶æ¥è¯´ï¼Œä¸åˆ©äºä»£ç å‹ç¼©å’Œä¼˜åŒ–ï¼Œä¹Ÿä¸åˆ©äº TS çš„ç±»å‹æ¨å¯¼</li></ul><p>Hooks æ¥è§£å†³è¿™äº›é—®é¢˜</p><h3 id="hooksæ¸è¿›ç­–ç•¥" tabindex="-1">hooksæ¸è¿›ç­–ç•¥ <a class="header-anchor" href="#hooksæ¸è¿›ç­–ç•¥" aria-hidden="true">#</a></h3><ul><li>reactæ²¡æœ‰è®¡åˆ’ä»Reactä¸­ç§»é™¤ class <a href="https://zh-hans.reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener noreferrer">æ–‡æ¡£</a></li><li>Hooks å’Œç°æœ‰ä»£ç å¯ä»¥åŒæ—¶å·¥ä½œï¼Œä½ å¯ä»¥æ¸è¿›å¼åœ°ä½¿ç”¨ä»–ä»¬ <ul><li>ä¸æ¨èç›´æ¥ä½¿ç”¨ Hooks å¤§è§„æ¨¡é‡æ„ç°æœ‰ç»„ä»¶</li><li>æ¨èï¼šæ–°åŠŸèƒ½ç”¨ Hooksï¼Œå¤æ‚åŠŸèƒ½å®ç°ä¸äº†çš„ï¼Œä¹Ÿå¯ä»¥ç»§ç»­ç”¨ class</li><li>æ‰¾ä¸€ä¸ªåŠŸèƒ½ç®€å•ã€éæ ¸å¿ƒåŠŸèƒ½çš„ç»„ä»¶å¼€å§‹ä½¿ç”¨ hooks</li></ul></li><li>ä¹‹å‰çš„reactè¯­æ³•å¹¶ä¸æ˜¯ä»¥åå°±ä¸ç”¨äº† <ul><li>class ç»„ä»¶ç›¸å…³çš„ API åœ¨hooksä¸­å¯ä»¥ä¸ç”¨ <ul><li>class è‡ªèº«è¯­æ³•ï¼Œæ¯”å¦‚ï¼Œconstructorã€static ç­‰</li><li>é’©å­å‡½æ•°ï¼Œ<code>componentDidMount</code>ã€<code>componentDidUpdate</code>ã€<code>componentWillUnmount</code></li><li><code>this</code> ç›¸å…³çš„ç”¨æ³•</li></ul></li><li><strong>åŸæ¥çš„ React å†…å®¹è¿˜æ˜¯è¦ç”¨çš„</strong><ul><li>JSXï¼š<code>{}</code>ã€<code>onClick={handleClick}</code>ã€æ¡ä»¶æ¸²æŸ“ã€åˆ—è¡¨æ¸²æŸ“ã€æ ·å¼å¤„ç†ç­‰</li><li>ç»„ä»¶ï¼šå‡½æ•°ç»„ä»¶ã€ç»„ä»¶é€šè®¯</li><li>React å¼€å‘ç†å¿µï¼š<code>å•å‘æ•°æ®æµ</code>ã€<code>çŠ¶æ€æå‡</code> ç­‰</li><li>è§£å†³é—®é¢˜çš„æ€è·¯ã€æŠ€å·§ã€å¸¸è§é”™è¯¯çš„åˆ†æç­‰</li></ul></li></ul></li></ul><p><strong>æ€»ç»“</strong>ï¼š</p><ol><li>reactæ²¡æœ‰è®¡åˆ’ä»Reactä¸­ç§»é™¤class</li><li>reactå°†ç»§ç»­ä¸º class ç»„ä»¶æä¾›æ”¯æŒ</li><li>å¯ä»¥åœ¨é¡¹ç›®ä¸­åŒæ—¶ä½¿ç”¨hookså’Œclass</li></ol><h3 id="usestate-åŸºæœ¬ä½¿ç”¨" tabindex="-1">useState-åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#usestate-åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a></h3><p><strong>hookæŒ‡çš„å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°</strong> <strong>ä»¥useå¼€å¤´</strong></p><div class="tip custom-block"><p class="custom-block-title">æ³¨æ„</p><p>å‚æ•°0æŒ‡å®šçŠ¶æ€stateåˆå§‹å€¼,å¦‚æœæ²¡æœ‰åˆå§‹çŠ¶æ€,stateä¸ºundefined,å»ä¿®æ”¹stateä¼šå˜æˆNaN</p><p>æ‰“å°å‡ºæ¥è¿™æ˜¯ä¸€ä¸ªæ•°ç»„</p><p>ç´¢å¼• 0 ä¸ºstateçŠ¶æ€å€¼</p><p>ç´¢å¼• 1 è¡¨ç¤ºï¼šä¿®æ”¹çŠ¶æ€çš„å‡½æ•°ï¼ˆsetStateï¼‰</p></div><div class="tip custom-block"><p class="custom-block-title">æ³¨æ„</p><p>useState hook çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„å€¼</p></div><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ•°ç»„è§£æ„</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* å±•ç¤ºçŠ¶æ€å€¼ */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* ç‚¹å‡»æŒ‰é’®ï¼Œè®©çŠ¶æ€å€¼ +1 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Example <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>setCount çš„æ‰“å°ç»“æœ</p><div class="language-"><pre><code>Æ’ dispatchSetState(fiber, queue, action) {
      {
        if (typeof arguments[3] === &#39;function&#39;) {
          error(&quot;State updates from the useState() and useReducer() Hooks don&#39;t support the &quot; + &#39;secâ€¦
</code></pre></div><p>ä¹Ÿå¯ä»¥è¿™æ ·å†™ å°±ä¸€ä¸ªè§£æ„çš„åŒºåˆ«:</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token function-variable function">Count</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  
  <span class="token keyword">const</span> stateArray <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> state <span class="token operator">=</span> stateArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> setState <span class="token operator">=</span> stateArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>çŠ¶æ€ä¸ºï¼š<span class="token punctuation">{</span>state<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setState</span><span class="token punctuation">(</span>state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¥çœ‹ä¸‹ä¸Šé¢è¿™ä¸ªuseStateç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹</p><ul><li><p>ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼š</p><ol><li>ä»å¤´å¼€å§‹æ‰§è¡Œè¯¥ç»„ä»¶ä¸­çš„ä»£ç é€»è¾‘</li><li>è°ƒç”¨ <code>useState(0)</code> å°†ä¼ å…¥çš„å‚æ•°ä½œä¸ºçŠ¶æ€åˆå§‹å€¼ï¼Œå³ï¼š0</li><li>æ¸²æŸ“ç»„ä»¶ï¼Œæ­¤æ—¶ï¼Œè·å–åˆ°çš„çŠ¶æ€ count å€¼ä¸ºï¼š 0</li></ol></li><li><p>ç»„ä»¶ç¬¬äºŒæ¬¡æ¸²æŸ“ï¼š</p><ol><li>ç‚¹å‡»æŒ‰é’®ï¼Œè°ƒç”¨ <code>setCount(count + 1)</code> ä¿®æ”¹çŠ¶æ€ï¼Œå› ä¸ºçŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ï¼Œè¯¥ç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“</li><li>ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œä¼šå†æ¬¡æ‰§è¡Œè¯¥ç»„ä»¶ä¸­çš„ä»£ç é€»è¾‘</li><li>å†æ¬¡è°ƒç”¨ <code>useState(0)</code>ï¼Œæ­¤æ—¶ <strong>React å†…éƒ¨ä¼šæ‹¿åˆ°æœ€æ–°çš„çŠ¶æ€å€¼è€Œéåˆå§‹å€¼</strong>ï¼Œæ¯”å¦‚ï¼Œè¯¥æ¡ˆä¾‹ä¸­æœ€æ–°çš„çŠ¶æ€å€¼ä¸º 1</li><li>å†æ¬¡æ¸²æŸ“ç»„ä»¶ï¼Œæ­¤æ—¶ï¼Œè·å–åˆ°çš„çŠ¶æ€ count å€¼ä¸ºï¼š1</li></ol></li></ul><p>æ³¨æ„ï¼š<strong>useState çš„åˆå§‹å€¼(å‚æ•°)åªä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ç”Ÿæ•ˆ</strong>ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä»¥åçš„æ¯æ¬¡æ¸²æŸ“ï¼ŒuseState è·å–åˆ°éƒ½æ˜¯æœ€æ–°çš„çŠ¶æ€å€¼ã€‚React ç»„ä»¶ä¼šè®°ä½æ¯æ¬¡æœ€æ–°çš„çŠ¶æ€å€¼ï¼</p><h3 id="usestateçš„è¯»å–å’Œä½¿ç”¨" tabindex="-1">useStateçš„è¯»å–å’Œä½¿ç”¨ <a class="header-anchor" href="#usestateçš„è¯»å–å’Œä½¿ç”¨" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//Counterç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token function-variable function">Counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//åˆå§‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">//æ–°çš„çŠ¶æ€å€¼ä¼šè¦†ç›–åŸæ¥çš„å€¼</span>
      <span class="token operator">...</span>user<span class="token punctuation">,</span>
      age<span class="token operator">:</span> user<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>å§“åï¼š<span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>å¹´é¾„ï¼š<span class="token punctuation">{</span>user<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span> <span class="token operator">&gt;</span> ä¿®æ”¹å¹´é¾„ <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="useeffect-å‰¯ä½œç”¨ä»‹ç»" tabindex="-1">useEffect å‰¯ä½œç”¨ä»‹ç» <a class="header-anchor" href="#useeffect-å‰¯ä½œç”¨ä»‹ç»" aria-hidden="true">#</a></h3><p><code>side effect</code>ï¼šå‰¯ä½œç”¨</p><p>ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ æƒ³è¦åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œ<strong>å¤„ç†å‰¯ä½œç”¨ï¼ˆside effectï¼‰æ—¶</strong>ï¼Œå°±è¦ä½¿ç”¨ <strong>useEffect</strong> Hook äº† ä½œç”¨ï¼š<strong>å¤„ç†å‡½æ•°ç»„ä»¶ä¸­çš„å‰¯ä½œç”¨ï¼ˆside effectï¼‰</strong></p><p>é—®é¢˜ï¼šå‰¯ä½œç”¨ï¼ˆside effectï¼‰æ˜¯ä»€ä¹ˆ? å›ç­”ï¼šåœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°æˆ–å…¶ä»–æ“ä½œä¿®æ”¹äº†å…¶å±€éƒ¨ç¯å¢ƒä¹‹å¤–çš„çŠ¶æ€å˜é‡å€¼ï¼Œé‚£ä¹ˆå®ƒå°±è¢«ç§°ä¸ºæœ‰å‰¯ä½œç”¨ ç±»æ¯”ï¼Œå¯¹äº 999 æ„Ÿå†’çµæ„Ÿå†’è¯æ¥è¯´ï¼š</p><ul><li>ï¼ˆä¸»ï¼‰ä½œç”¨ï¼šç”¨äºæ„Ÿå†’å¼•èµ·çš„å¤´ç—›ï¼Œå‘çƒ­ï¼Œé¼»å¡ï¼Œæµæ¶•ï¼Œå’½ç—›ç­‰</li><li>å‰¯ä½œç”¨ï¼šå¯è§å›°å€¦ã€å—œç¡ã€å£æ¸´ã€è™šå¼±æ„Ÿ</li></ul><p>ç†è§£ï¼šå‰¯ä½œç”¨æ˜¯ç›¸å¯¹äºä¸»ä½œç”¨æ¥è¯´çš„ï¼Œä¸€ä¸ªåŠŸèƒ½ï¼ˆæ¯”å¦‚ï¼Œå‡½æ•°ï¼‰é™¤äº†ä¸»ä½œç”¨ï¼Œå…¶ä»–çš„ä½œç”¨å°±æ˜¯å‰¯ä½œç”¨ å¯¹äº React ç»„ä»¶æ¥è¯´ï¼Œ<strong>ä¸»ä½œç”¨å°±æ˜¯æ ¹æ®æ•°æ®ï¼ˆstate/propsï¼‰æ¸²æŸ“ UI</strong>ï¼Œé™¤æ­¤ä¹‹å¤–éƒ½æ˜¯å‰¯ä½œç”¨ï¼ˆæ¯”å¦‚ï¼Œæ‰‹åŠ¨ä¿®æ”¹ DOMï¼‰</p><p>å¸¸è§çš„å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼šæ•°æ®ï¼ˆAjaxï¼‰è¯·æ±‚ã€æ‰‹åŠ¨ä¿®æ”¹ DOMã€localStorageã€console.log æ“ä½œç­‰</p><p><strong>æ€»ç»“</strong>ï¼š</p><p>â€‹ å¯¹äºreactç»„ä»¶æ¥è¯´ï¼Œé™¤äº†æ¸²æŸ“UIä¹‹å¤–çš„å…¶ä»–æ“ä½œï¼Œéƒ½å¯ä»¥ç§°ä¹‹ä¸ºå‰¯ä½œç”¨</p><h3 id="useeffect-åŸºæœ¬ä½¿ç”¨" tabindex="-1">useEffect-åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#useeffect-åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a></h3><p>**ç›®æ ‡ï¼š**èƒ½å¤Ÿåœ¨å‡½æ•°ç»„ä»¶ä¸­æ“ä½œDOMï¼ˆå¤„ç†å‰¯ä½œç”¨ï¼‰</p><p><strong>å†…å®¹ï¼š</strong></p><p>ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ æƒ³è¦åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå¤„ç†å‰¯ä½œç”¨ï¼ˆside effectï¼‰æ—¶å°±è¦ä½¿ç”¨ useEffect Hook äº†</p><p>ä½œç”¨ï¼šå¤„ç†å‡½æ•°ç»„ä»¶ä¸­çš„ä¸€äº›å‰¯ä½œç”¨ï¼ˆside effectï¼‰</p><p>æ³¨æ„ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œå‰¯ä½œç”¨æ˜¯ä¸å¯é¿å…çš„ã€‚å› æ­¤ï¼Œreact ä¸“é—¨æä¾›äº† <strong>useEffect</strong> Hook <strong>æ¥å¤„ç†å‡½æ•°ç»„ä»¶ä¸­çš„å‰¯ä½œç”¨</strong></p><p>è¯­æ³•ï¼š</p><ul><li><strong>å‚æ•°</strong>ï¼š<strong>å›è°ƒå‡½æ•°</strong>ï¼ˆç§°ä¸º <strong>effect</strong>ï¼‰ï¼Œå°±æ˜¯<strong>åœ¨è¯¥å‡½æ•°ä¸­å†™å‰¯ä½œç”¨ä»£ç </strong></li><li>æ‰§è¡Œæ—¶æœºï¼šè¯¥ effect ä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“ä»¥åŠæ¯æ¬¡ç»„ä»¶æ›´æ–°åæ‰§è¡Œ</li><li>ç›¸å½“äº componentDidMount + componentDidUpdate</li></ul><p>å…ˆè°ƒç”¨useEffect( )å‡½æ•°</p><div class="language-"><pre><code>useEffect( )
</code></pre></div><p>useEffect ( å‚æ•°) å‚æ•°æ˜¯ä¸ªå›è°ƒå‡½æ•°</p><p>ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯effectå‡½æ•°</p><div class="language-js"><pre><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å½“å‰å·²ç‚¹å‡» </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> æ¬¡</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å½“ç„¶ä¹Ÿå¯ä»¥å†™ç®­å¤´å‡½æ•°</p><div class="language-js"><pre><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å½“å‰å·²ç‚¹å‡» </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> æ¬¡</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>ç¤ºä¾‹ï¼š</p><div class="language-jsx"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å½“å‰å·²ç‚¹å‡» </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> æ¬¡</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">è®¡æ•°å™¨ï¼š</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="useeffectç¬¬äºŒä¸ªå‚æ•°" tabindex="-1">useEffectç¬¬äºŒä¸ªå‚æ•° <a class="header-anchor" href="#useeffectç¬¬äºŒä¸ªå‚æ•°" aria-hidden="true">#</a></h3><p><em><strong>ç¬¬äºŒä¸ªå‚æ•°ç›¸å½“äºvueä¸­çš„ watchç›‘å¬</strong></em></p><p>**ç›®æ ‡ï¼š**èƒ½å¤Ÿè®¾ç½® useEffect çš„ä¾èµ–åªåœ¨ count å˜åŒ–æ—¶æ‰§è¡Œç›¸åº”çš„ effect</p><p><strong>å†…å®¹ï¼š</strong></p><ul><li><p>é—®é¢˜ï¼šå¦‚æœç»„ä»¶ä¸­æœ‰å¦å¤–ä¸€ä¸ªçŠ¶æ€ï¼Œå¦ä¸€ä¸ªçŠ¶æ€æ›´æ–°æ—¶ï¼Œåˆšåˆšçš„ effect å›è°ƒä¹Ÿä¼šæ‰§è¡Œ</p></li><li><p>é»˜è®¤æƒ…å†µï¼šåªè¦çŠ¶æ€å‘ç”Ÿæ›´æ–° useEffect çš„ effect å›è°ƒå°±ä¼šæ‰§è¡Œ</p></li><li><p>æ€§èƒ½ä¼˜åŒ–ï¼š<strong>è·³è¿‡ä¸å¿…è¦çš„æ‰§è¡Œï¼Œåªåœ¨ count å˜åŒ–æ—¶ï¼Œæ‰æ‰§è¡Œç›¸åº”çš„ effect</strong></p></li><li><p>è¯­æ³•ï¼š</p><ul><li>ç¬¬äºŒä¸ªå‚æ•°ï¼šå¯é€‰ï¼Œä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ å¯ä»¥æˆä¸ºä¾èµ–é¡¹ï¼ˆdepsï¼‰</li><li>è¯¥ç¤ºä¾‹ä¸­è¡¨ç¤ºï¼šåªæœ‰å½“ count æ”¹å˜æ—¶ï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œè¯¥ effect</li></ul></li></ul><div class="language-js"><pre><code>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å½“å‰å·²ç‚¹å‡» </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> æ¬¡</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>æ ¸å¿ƒä»£ç ï¼š</strong></p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">Counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;conut&#39;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å½“å‰å·²ç‚¹å‡» </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> æ¬¡</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//è·³è¿‡ä¸å¿…è¦çš„æ‰§è¡Œï¼Œåªåœ¨ count å˜åŒ–æ—¶ï¼Œæ‰æ‰§è¡Œç›¸åº”çš„ effect</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>è®¡æ•°å™¨ï¼š<span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> <span class="token punctuation">{</span>loading<span class="token operator">?</span> <span class="token string">&#39;åŠ è½½ä¸­&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;åŠ è½½å®Œæˆ!&#39;</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token operator">!</span>loading<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>åˆ‡æ¢ loading<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç©ºæ•°ç»„" tabindex="-1">ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ <a class="header-anchor" href="#ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç©ºæ•°ç»„" aria-hidden="true">#</a></h3><p>**ç›®æ ‡ï¼š**èƒ½å¤Ÿè®¾ç½®useEffectçš„ä¾èµ–ï¼Œè®©ç»„ä»¶åªæœ‰åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“åä¼šæ‰§è¡Œ</p><p><strong>å†…å®¹</strong>ï¼š</p><ul><li><p>useEffect çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ª<strong>ç©ºæ•°ç»„ï¼ˆ[]ï¼‰</strong>ï¼Œè¡¨ç¤ºåªåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åæ‰§è¡Œ effect</p></li><li><p>ä½¿ç”¨åœºæ™¯ï¼š1 äº‹ä»¶ç»‘å®š 2 å‘é€è¯·æ±‚è·å–æ•°æ® ç­‰</p></li><li><p>è¯­æ³•ï¼š</p><ul><li>è¯¥ effect åªä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åæ‰§è¡Œï¼Œå› æ­¤ï¼Œå¯ä»¥æ‰§è¡Œåƒäº‹ä»¶ç»‘å®šç­‰åªéœ€è¦æ‰§è¡Œä¸€æ¬¡çš„æ“ä½œ</li><li>æ­¤æ—¶ï¼Œç›¸å½“äº class ç»„ä»¶çš„ componentDidMount é’©å­å‡½æ•°çš„ä½œç”¨</li></ul></li></ul><div class="language-js"><pre><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>æ³¨æ„ï¼š</p><ul><li>è·Ÿ useState Hook ä¸€æ ·ï¼Œä¸€ä¸ªç»„ä»¶ä¸­ä¹Ÿå¯ä»¥è°ƒç”¨ useEffect Hook å¤šæ¬¡</li><li>æ¨èï¼š<strong>ä¸€ä¸ª useEffect åªå¤„ç†ä¸€ä¸ªåŠŸèƒ½ï¼Œæœ‰å¤šä¸ªåŠŸèƒ½æ—¶ï¼Œä½¿ç”¨å¤šæ¬¡ useEffect</strong></li></ul><h3 id="useeffectå‘é€è¯·æ±‚" tabindex="-1">useEffectå‘é€è¯·æ±‚ <a class="header-anchor" href="#useeffectå‘é€è¯·æ±‚" aria-hidden="true">#</a></h3><ul><li><p>åœ¨ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ useEffect Hook æ¥å‘é€è¯·æ±‚ï¼ˆside effectï¼‰è·å–æ•°æ®</p></li><li><p>æ³¨æ„ï¼š<strong>effect åªèƒ½æ˜¯ä¸€ä¸ªåŒæ­¥å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨ async</strong></p><ul><li>å› ä¸ºå¦‚æœ effect æ˜¯ async çš„ï¼Œæ­¤æ—¶è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ã€‚è¿™æ ·çš„è¯ï¼Œå°±æ— æ³•ä¿è¯æ¸…ç†å‡½æ•°è¢«ç«‹å³è°ƒç”¨</li></ul></li><li><p>ä¸ºäº†ä½¿ç”¨ async/await è¯­æ³•ï¼Œå¯ä»¥åœ¨ effect å†…éƒ¨åˆ›å»º async å‡½æ•°ï¼Œå¹¶è°ƒç”¨</p></li></ul><p><strong>æ ¸å¿ƒä»£ç ï¼š</strong></p><div class="language-jsx"><pre><code><span class="token comment">// é”™è¯¯æ¼”ç¤ºï¼šä¸è¦ç»™ effect æ·»åŠ  async</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;http://xxx&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// æ­£ç¡®ä½¿ç”¨</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">loadData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;http://xxx&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="å…¶ä»–" tabindex="-1">å…¶ä»– <a class="header-anchor" href="#å…¶ä»–" aria-hidden="true">#</a></h2><h3 id="é‡Šæ”¾é¡¹ç›®é…ç½®æ–‡ä»¶" tabindex="-1">é‡Šæ”¾é¡¹ç›®é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#é‡Šæ”¾é¡¹ç›®é…ç½®æ–‡ä»¶" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token function">yarn</span> <span class="token function">eject</span>
</code></pre></div><p>é€šè¿‡æ‰§è¡Œ <code>yarn eject</code> å‘½ä»¤ï¼Œé‡Šæ”¾ <code>react-scripts</code> ä¸­çš„æ‰€æœ‰é…ç½®åˆ°é¡¹ç›®ä¸­ï¼ˆæ³¨æ„ï¼šè¯¥æ“ä½œä¸å¯é€†ï¼ï¼ï¼ï¼‰</p><h3 id="è·¯ç”±é‡å®šå‘" tabindex="-1">è·¯ç”±é‡å®šå‘ <a class="header-anchor" href="#è·¯ç”±é‡å®šå‘" aria-hidden="true">#</a></h3><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch<span class="token punctuation">,</span> Redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&#39;./pages/layout&#39;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">&#39;./pages/login&#39;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// return &lt;div className=&#39;app&#39;&gt;æå®¢å›­&lt;/div&gt;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* é‡å®šå‘åˆ°home  åŠ äº†exactç²¾ç¡®åœ°åŒ¹é…æ‰èƒ½æ­£ç¡®å±•ç¤ºé¦–é¡µå†…å®¹ */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Route
            exact
            path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span>
            render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>

          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/login&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Login<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* childrenå½¢å¼é…ç½®è·¯ç”± */</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token comment">/* &lt;Route&gt;
          &lt;Login /&gt;
        &lt;/Route&gt; */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// console.log(BrowserRouter)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App
</code></pre></div><h3 id="craco-cracoé…ç½®è·¯å¾„åˆ«å" tabindex="-1">@craco/cracoé…ç½®è·¯å¾„åˆ«å <a class="header-anchor" href="#craco-cracoé…ç½®è·¯å¾„åˆ«å" aria-hidden="true">#</a></h3><ul><li>æ³¨æ„ï¼šCRA å°†æ‰€æœ‰å·¥ç¨‹åŒ–é…ç½®ï¼Œéƒ½éšè—åœ¨äº† <code>react-scripts</code> åŒ…ä¸­ï¼Œæ‰€ä»¥ï¼Œé¡¹ç›®ä¸­çœ‹ä¸åˆ°ä»»ä½•é…ç½®ä¿¡æ¯</li><li>å¦‚æœè¦ä¿®æ”¹ CRA çš„é»˜è®¤é…ç½®ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ¡ˆï¼š <ol><li>ã€æ¨èã€‘é€šè¿‡ç¬¬ä¸‰æ–¹åº“æ¥ä¿®æ”¹ï¼Œæ¯”å¦‚ï¼Œ<code>@craco/craco</code></li><li>é€šè¿‡æ‰§è¡Œ <code>yarn eject</code> å‘½ä»¤ï¼Œé‡Šæ”¾ <code>react-scripts</code> ä¸­çš„æ‰€æœ‰é…ç½®åˆ°é¡¹ç›®ä¸­ï¼ˆæ³¨æ„ï¼šè¯¥æ“ä½œä¸å¯é€†ï¼ï¼ï¼ï¼‰</li></ol></li></ul><p><strong>æ­¥éª¤</strong>ï¼š</p><ol><li>å®‰è£…ä¿®æ”¹ CRA é…ç½®çš„åŒ…ï¼š<code>npm i @craco/craco</code></li><li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»º craco çš„é…ç½®æ–‡ä»¶ï¼š<code>craco.config.js</code>ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®è·¯å¾„åˆ«å</li><li>ä¿®æ”¹ <code>package.json</code> ä¸­çš„è„šæœ¬å‘½ä»¤</li><li>åœ¨ä»£ç ä¸­ï¼Œå°±å¯ä»¥é€šè¿‡ <code>@</code> æ¥è¡¨ç¤º src ç›®å½•çš„ç»å¯¹è·¯å¾„</li><li>é‡å¯é¡¹ç›®ï¼Œè®©é…ç½®ç”Ÿæ•ˆ</li></ol><p><strong>æ ¸å¿ƒä»£ç </strong>ï¼š</p><p>craco.config.js ä¸­ï¼š</p><div class="language-js"><pre><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// webpack é…ç½®</span>
  webpack<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// é…ç½®åˆ«å</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// çº¦å®šï¼šä½¿ç”¨ @ è¡¨ç¤º src æ–‡ä»¶æ‰€åœ¨è·¯å¾„</span>
      <span class="token string">&#39;@&#39;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>package.json ä¸­ï¼š</p><div class="language-json"><pre><code><span class="token comment">// å°† start/build/test ä¸‰ä¸ªå‘½ä»¤ä¿®æ”¹ä¸º craco æ–¹å¼</span>

<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;craco start&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;craco build&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;craco test&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts eject&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="åˆ«åè·¯å¾„æç¤º" tabindex="-1">@åˆ«åè·¯å¾„æç¤º <a class="header-anchor" href="#åˆ«åè·¯å¾„æç¤º" aria-hidden="true">#</a></h3><p>èƒ½å¤Ÿè®©vscodeè¯†åˆ«@è·¯å¾„å¹¶ç»™å‡ºè·¯å¾„æç¤º</p><p>åœ¨ VSCode ä¸­ï¼Œjsconfig.json æ–‡ä»¶ä¸­çš„æœ‰æ—¶å€™ä¼šæœ‰çº¢è‰²æ³¢æµªçº¿æç¤ºé”™è¯¯ï¼Œç›´æ¥å¿½ç•¥å³å¯ï¼Œä¸ä¼šå½±å“è·¯å¾„æç¤º</p><ol><li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>jsconfig.json</code> é…ç½®æ–‡ä»¶</li><li>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®</li></ol><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>VSCode ä¼šè‡ªåŠ¨è¯»å– <code>jsconfig.json</code> ä¸­çš„é…ç½®ï¼Œè®© vscode çŸ¥é“ @ å°±æ˜¯ src ç›®å½•</p><h2 id="redux" tabindex="-1">Redux <a class="header-anchor" href="#redux" aria-hidden="true">#</a></h2><h3 id="createstoreè¢«åºŸå¼ƒ" tabindex="-1"><code>createStore</code>è¢«åºŸå¼ƒ <a class="header-anchor" href="#createstoreè¢«åºŸå¼ƒ" aria-hidden="true">#</a></h3><div class="tip custom-block"><p class="custom-block-title">åŸæ–‡</p><p>We recommend using the configureStore method of the @reduxjs/toolkit package, which replaces createStore.</p><p>Redux Toolkit is our recommended approach for writing Redux logic today, including store setup, reducers, data fetching, and more.</p><p>For more details, please read this Redux docs page: <a href="https://redux.js.org/introduction/why-rtk-is-redux-today" target="_blank" rel="noopener noreferrer">https://redux.js.org/introduction/why-rtk-is-redux-today</a></p><p>configureStore from Redux Toolkit is an improved version of createStore that simplifies setup and helps avoid common bugs.</p><p>You should not be using the redux core package by itself today, except for learning purposes. The createStore method from the core redux package will not be removed, but we encourage all users to migrate to using Redux Toolkit for all Redux code.</p><p>If you want to use createStore without this visual deprecation warning, use the legacy_createStore import instead:</p><p>import { legacy_createStore as createStore} from &#39;redux&#39;</p><p>æˆ‘ä»¬æ¨èä½¿ç”¨ @reduxjs/toolkit åŒ…çš„ configureStore æ–¹æ³•ï¼Œå®ƒå–ä»£äº† createStoreã€‚</p><p>Redux Toolkit æ˜¯æˆ‘ä»¬æ¨èçš„å½“ä»Šç¼–å†™ Redux é€»è¾‘çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬å­˜å‚¨è®¾ç½®ã€reducersã€æ•°æ®è·å–ç­‰ã€‚</p><p>æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»æ­¤ Redux æ–‡æ¡£é¡µé¢ï¼š<a href="https://redux.js.org/introduction/why-rtk-is-redux-today" target="_blank" rel="noopener noreferrer">https://redux.js.org/introduction/why-rtk-is-redux-today</a></p><p>Redux Toolkit ä¸­çš„ configureStore æ˜¯ createStore çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œå®ƒç®€åŒ–äº†è®¾ç½®å¹¶æœ‰åŠ©äºé¿å…å¸¸è§é”™è¯¯ã€‚</p><p>ä½ ä»Šå¤©ä¸åº”è¯¥å•ç‹¬ä½¿ç”¨ redux æ ¸å¿ƒåŒ…ï¼Œé™¤éæ˜¯ä¸ºäº†å­¦ä¹ ç›®çš„ã€‚ æ ¸å¿ƒ redux åŒ…ä¸­çš„ createStore æ–¹æ³•ä¸ä¼šè¢«åˆ é™¤ï¼Œä½†æˆ‘ä»¬é¼“åŠ±æ‰€æœ‰ç”¨æˆ·è¿ç§»åˆ°å¯¹æ‰€æœ‰ Redux ä»£ç ä½¿ç”¨ Redux Toolkitã€‚</p><p>å¦‚æœæ‚¨æƒ³åœ¨æ²¡æœ‰æ­¤è§†è§‰å¼ƒç”¨è­¦å‘Šçš„æƒ…å†µä¸‹ä½¿ç”¨ createStoreï¼Œè¯·æ”¹ç”¨ legacy_createStore å¯¼å…¥ï¼š</p><p>import { legacy_createStore as createStore} from &#39;redux&#39;</p></div><h3 id="å®‰è£…" tabindex="-1">å®‰è£… <a class="header-anchor" href="#å®‰è£…" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token function">npm</span> i redux react-redux redux-thunk redux-devtools-extension axios
</code></pre></div><h3 id="ä½¿ç”¨" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨" aria-hidden="true">#</a></h3><ol><li><p>åœ¨ store ç›®å½•ä¸­åˆ†åˆ«åˆ›å»ºï¼šactions å’Œ reducers æ–‡ä»¶å¤¹ã€index.js æ–‡ä»¶</p></li><li><p>åœ¨ store/index.js ä¸­ï¼Œåˆ›å»º store å¹¶å¯¼å‡º</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> legacy_createStore <span class="token keyword">as</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span>
<span class="token comment">// import { createStore, applyMiddleware } from &#39;redux&#39;</span>
<span class="token keyword">import</span> rootReducer <span class="token keyword">from</span> <span class="token string">&#39;./reducers&#39;</span>

<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">&#39;redux-thunk&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> composeWithDevTools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux-devtools-extension&#39;</span>
<span class="token keyword">const</span> middlewares <span class="token operator">=</span> <span class="token function">composeWithDevTools</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>rootReducer<span class="token punctuation">,</span> middlewares<span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre></div></li><li><p>store/reducers/index.js ä¸­ï¼š</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;redux&#39;</span>

<span class="token keyword">import</span> login <span class="token keyword">from</span> <span class="token string">&#39;./login&#39;</span>

<span class="token keyword">const</span> rootReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  login
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> rootReducer
</code></pre></div></li><li><p>store/reducers/login.js ä¸­ï¼š</p><div class="language-js"><pre><code><span class="token comment">// ç™»å½•åŠŸèƒ½ï¼Œåªéœ€è¦å­˜å‚¨ token å³å¯ï¼Œæ‰€ä»¥ï¼ŒçŠ¶æ€é»˜è®¤å€¼ä¸ºï¼š&#39;&#39;</span>
<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> login
</code></pre></div></li><li><p>src/index.js ä¸­ï¼š</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&#39;./store&#39;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div></li></ol><h3 id="dispatch" tabindex="-1">Dispatch <a class="header-anchor" href="#dispatch" aria-hidden="true">#</a></h3><p>Redux store æœ‰ä¸€ä¸ªæ–¹æ³•å« <code>dispatch</code>ã€‚<strong>æ›´æ–° state çš„å”¯ä¸€æ–¹æ³•æ˜¯è°ƒç”¨ <code>store.dispatch()</code> å¹¶ä¼ å…¥ä¸€ä¸ª action å¯¹è±¡</strong>ã€‚ store å°†æ‰§è¡Œæ‰€æœ‰ reducer å‡½æ•°å¹¶è®¡ç®—å‡ºæ›´æ–°åçš„ stateï¼Œè°ƒç”¨ <code>getState()</code> å¯ä»¥è·å–æ–° stateã€‚</p><p><strong>dispatch ä¸€ä¸ª action å¯ä»¥å½¢è±¡çš„ç†è§£ä¸º &quot;è§¦å‘ä¸€ä¸ªäº‹ä»¶&quot;</strong>ã€‚å‘ç”Ÿäº†ä¸€äº›äº‹æƒ…ï¼Œæˆ‘ä»¬å¸Œæœ› store çŸ¥é“è¿™ä»¶äº‹ã€‚ Reducer å°±åƒäº‹ä»¶ç›‘å¬å™¨ä¸€æ ·ï¼Œå½“å®ƒä»¬æ”¶åˆ°å…³æ³¨çš„ action åï¼Œå®ƒå°±ä¼šæ›´æ–° state ä½œä¸ºå“åº”ã€‚</p></div></div><footer class="page-footer" data-v-8fcebc32 data-v-5c96fb00><div class="edit" data-v-5c96fb00><div class="edit-link" data-v-5c96fb00 data-v-55695e90><!----></div></div><div class="updated" data-v-5c96fb00><!----></div></footer><!----><!--[--><!--[--><!----><!--]--><!--[--><!----><!--]--><!--]--></div></main></div><!----><!--]--><footer data-v-c1f40558> Copyright Â© 2019-2022 | MIT License </footer><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"849cd169\",\"archives.md\":\"485d3d9f\",\"index.md\":\"5413b965\",\"posts_ajax.md\":\"d41fb002\",\"posts_git.md\":\"51bcdb97\",\"posts_react.md\":\"fbe7f0cb\",\"posts_es6æ¨¡å—åŒ–.md\":\"5261bc18\",\"posts_npmä½¿ç”¨æ‰‹å†Œ.md\":\"d8061f3c\",\"posts_npmå‘½ä»¤å‘ç”Ÿçš„äº‹.md\":\"4f1129ec\",\"posts_vue3å¿«é€Ÿä¸Šæ‰‹.md\":\"cdeb2953\",\"posts_wechat-01.md\":\"c170829a\",\"posts_wechat-02.md\":\"cb7ff986\",\"posts_wechat-03.md\":\"fe0d55d5\",\"posts_wechat-04.md\":\"797aa61a\",\"posts_wechat-05.md\":\"10d2a821\",\"posts_å‰ç«¯å¸¸è§é¢è¯•é¢˜æ€»ç»“.md\":\"7cf35d1e\",\"posts_å´é›¨è±ªé¢è¯•é¢˜è¯¦è§£.md\":\"c98758c7\",\"posts_å¾®ä¿¡å°ç¨‹åºå°è£…è¯·æ±‚å“åº”æ‹¦æˆªå™¨.md\":\"994e234a\",\"posts_ç¬¬äºŒæ¬¡é¢è¯•é—®é¢˜ï¼š.md\":\"9e3ebcd4\",\"tags.md\":\"ab596d1b\"}")</script>
    <script type="module" async src="/KBLOG_2/assets/app.bb1174c4.js"></script>
    
  </body>
</html>